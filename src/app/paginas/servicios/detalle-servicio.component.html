<!-- ESTADO: cargando -->
<div class="detalle-servicio-page" *ngIf="isLoading">
  <div class="container">
    <p>Cargando servicio...</p>
  </div>
</div>

<!-- ESTADO: servicio cargado -->
<!-- ESTADO: cargando -->
<div class="detalle-servicio-page" *ngIf="isLoading">
  <div class="container">
    <p>Cargando servicio...</p>
  </div>
</div>

<!-- ESTADO: servicio cargado -->
  <div class="detalle-servicio-page" *ngIf="!isLoading && servicio; else notFoundTpl">
    <div class="container">
      <!-- 1. Título (arriba) -->
      <div class="detalle-header">
        <h1 class="detalle-title">{{ servicio.nombre }}</h1>

        <span *ngIf="servicio.categoria" class="badge badge-categoria">
          {{ servicio.categoria }}
        </span>
</div>


      <!-- 3. Galería de imágenes -->
  <div
    class="detalle-galeria"
    *ngIf="allImages?.length"
  >
    <!-- Imagen principal -->
    <div class="galeria-principal" *ngIf="selectedImage">
      <img
        [src]="selectedImage"
        [alt]="servicio?.nombre"
        (click)="openLightbox(selectedImage)"
      />
    </div>

    <!-- Miniaturas -->
    <div class="galeria-thumbs" *ngIf="allImages.length > 1">
      <button
        type="button"
        class="thumb-btn"
        *ngFor="let img of allImages"
        (click)="selectImage(img)"
        [class.is-active]="img === selectedImage"
      >
        <img
          [src]="img"
          [alt]="servicio?.nombre"
        />
      </button>
    </div>
  </div>

  <!-- Lightbox / imagen maximizada -->
  <div
    class="lightbox-backdrop"
    *ngIf="lightboxOpen"
    (click)="closeLightbox()"
  >
    <div
      class="lightbox-content"
      (click)="$event.stopPropagation()"
    >
      <button
        type="button"
        class="lightbox-close"
        (click)="closeLightbox()"
      >
        &times;
      </button>

      <!-- Botón anterior -->
      <button
        type="button"
        class="lightbox-prev"
        (click)="prevImage()"
        *ngIf="allImages.length > 1"
      >
        &#10094;
      </button>

      <!-- Botón siguiente -->
      <button
        type="button"
        class="lightbox-next"
        (click)="nextImage()"
        *ngIf="allImages.length > 1"
      >
        &#10095;
      </button>

      <img
        [src]="lightboxImage || selectedImage"
        [alt]="servicio?.nombre"
      />
    </div>
  </div>



    <!-- 4. Descripción -->
    <div class="detalle-section">
      <h2>Descripción</h2>
      <p class="descripcion">
        {{ servicio.descripcion }}
      </p>
    </div>

    <!-- 5. Características (sin modificar el HTML) -->
    <div class="detalle-section" *ngIf="servicio.caracteristicas?.length">
      <h2>Características</h2>
      <ul class="caracteristicas-list">
        <li *ngFor="let item of servicio.caracteristicas">
          <span class="material-icons">check_circle_outline</span>
          <span>{{ item }}</span>
        </li>
      </ul>
    </div>

    <!-- Botón de Volver -->
    <div class="volver-container">
      <a routerLink="/servicios" class="btn-primary">&larr; Volver a Servicios</a>
    </div>
  </div>
</div>

<!-- TEMPLATE: servicio no encontrado -->
<ng-template #notFoundTpl>
  <div class="detalle-servicio-page">
    <div class="container">
      <p>Servicio no encontrado.</p>
      <a routerLink="/servicios" class="btn-primary">Volver a Servicios</a>
    </div>
  </div>
</ng-template>

