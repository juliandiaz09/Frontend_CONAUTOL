import{a as N}from"./chunk-SN34MVIC.js";import{a as B,d as R,g as U}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Db as k,Eb as r,Fb as D,Gb as _,Ha as u,Ia as I,Ka as O,La as a,Pb as E,Qa as y,Qb as f,Rb as C,Sb as P,Tb as S,Va as M,Z as m,_ as h,_a as p,fb as c,hb as w,kc as T,lc as z,mc as L,nb as i,ob as o,pb as b,qc as V,rc as F,sc as j,tb as x,tc as A,ub as g,vb as l}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";var H=(n,t,e)=>({"badge-activo":n,"badge-inactivo":t,"badge-completado":e});function K(n,t){n&1&&(i(0,"div",8)(1,"div",9)(2,"p"),r(3,"Cargando proyecto..."),o()()())}function $(n,t){if(n&1&&(i(0,"span",23),r(1),o()),n&2){let e=l(2);a(),_(" ",e.proyecto.cliente," ")}}function W(n,t){if(n&1){let e=x();i(0,"div",27)(1,"img",28),g("click",function(){m(e);let s=l(3);return h(s.openLightbox(s.selectedImage))}),o()()}if(n&2){let e=l(3);a(),c("src",e.selectedImage,u)("alt",e.proyecto==null?null:e.proyecto.nombre)}}function q(n,t){if(n&1){let e=x();i(0,"button",31),g("click",function(){let s=m(e).$implicit,v=l(4);return h(v.selectImage(s))}),b(1,"img",32),o()}if(n&2){let e=t.$implicit,d=l(4);w("is-active",e===d.selectedImage),a(),c("src",e,u)("alt",d.proyecto==null?null:d.proyecto.nombre)}}function G(n,t){if(n&1&&(i(0,"div",29),p(1,q,2,4,"button",30),o()),n&2){let e=l(3);a(),c("ngForOf",e.allImages)}}function J(n,t){if(n&1&&(i(0,"div",24),p(1,W,2,2,"div",25)(2,G,2,1,"div",26),o()),n&2){let e=l(2);a(),c("ngIf",e.selectedImage),a(),c("ngIf",e.allImages.length>1)}}function Q(n,t){if(n&1){let e=x();i(0,"button",38),g("click",function(){m(e);let s=l(3);return h(s.prevImage())}),r(1," \u276E "),o()}}function X(n,t){if(n&1){let e=x();i(0,"button",39),g("click",function(){m(e);let s=l(3);return h(s.nextImage())}),r(1," \u276F "),o()}}function Z(n,t){if(n&1){let e=x();i(0,"div",33),g("click",function(){m(e);let s=l(2);return h(s.closeLightbox())}),i(1,"div",34),g("click",function(s){return m(e),h(s.stopPropagation())}),i(2,"button",35),g("click",function(){m(e);let s=l(2);return h(s.closeLightbox())}),r(3," \xD7 "),o(),p(4,Q,2,0,"button",36)(5,X,2,0,"button",37),b(6,"img",32),o()()}if(n&2){let e=l(2);a(4),c("ngIf",e.allImages.length>1),a(),c("ngIf",e.allImages.length>1),a(),c("src",e.lightboxImage||e.selectedImage,u)("alt",e.proyecto==null?null:e.proyecto.nombre)}}function ee(n,t){if(n&1&&(i(0,"div",40)(1,"span",41),r(2,"Presupuesto"),o(),i(3,"span",42),r(4),f(5,"currency"),o()()),n&2){let e=l(2);a(4),_(" ",C(5,1,e.proyecto.presupuesto)," ")}}function te(n,t){if(n&1&&(i(0,"div",46),b(1,"div",47),i(2,"div",48)(3,"span",49),r(4,"Inicio"),o(),i(5,"span",50),r(6),f(7,"date"),o()()()),n&2){let e=l(3);a(6),_(" ",P(7,1,e.proyecto.fecha_inicio,"longDate")," ")}}function ne(n,t){if(n&1&&(i(0,"div",46),b(1,"div",51),i(2,"div",48)(3,"span",49),r(4,"Fin"),o(),i(5,"span",50),r(6),f(7,"date"),o()()()),n&2){let e=l(3);a(6),_(" ",P(7,1,e.proyecto.fecha_fin,"longDate")," ")}}function ie(n,t){if(n&1&&(i(0,"div",43)(1,"div",44),p(2,te,8,4,"div",45)(3,ne,8,4,"div",45),o()()),n&2){let e=l(2);a(2),c("ngIf",e.proyecto.fecha_inicio),a(),c("ngIf",e.proyecto.fecha_fin)}}function oe(n,t){if(n&1&&(i(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1",11),r(4),o(),p(5,$,2,1,"span",12),o(),p(6,J,3,2,"div",13)(7,Z,7,4,"div",14),i(8,"div",15)(9,"span",16),r(10),f(11,"uppercase"),o(),p(12,ee,6,3,"div",17),o(),p(13,ie,4,2,"div",18),i(14,"div",19)(15,"h2"),r(16,"Descripci\xF3n del proyecto"),o(),i(17,"p",20),r(18),o()(),i(19,"div",21)(20,"a",22),r(21," \u2190 Volver a Proyectos "),o()()()()),n&2){let e=l();a(4),D(e.proyecto.nombre),a(),c("ngIf",e.proyecto.cliente),a(),c("ngIf",e.allImages==null?null:e.allImages.length),a(),c("ngIf",e.lightboxOpen),a(2),c("ngClass",E(11,H,e.proyecto.estado==="activo",e.proyecto.estado==="inactivo",e.proyecto.estado==="completado")),a(),_(" ",C(11,9,e.proyecto.estado)," "),a(2),c("ngIf",e.proyecto.presupuesto!=null),a(),c("ngIf",e.proyecto.fecha_inicio||e.proyecto.fecha_fin),a(5),_(" ",e.proyecto.descripcion||"Este proyecto a\xFAn no tiene una descripci\xF3n detallada."," ")}}function ae(n,t){n&1&&(i(0,"div",8)(1,"div",9)(2,"p"),r(3,"Proyecto no encontrado."),o(),i(4,"div",21)(5,"a",22),r(6," \u2190 Volver a Proyectos "),o()()()())}var Y=class n{constructor(t,e){this.route=t;this.apiService=e}proyecto=null;isLoading=!0;allImages=[];selectedImage=null;lightboxOpen=!1;lightboxImage=null;currentImageIndex=0;ngOnInit(){this.initializeChatbot(),this.route.params.subscribe(t=>{let e=+t.id;e&&this.cargarDetalleProyecto(e)})}cargarDetalleProyecto(t){this.isLoading=!0,this.apiService.getDetalleProyecto(t).subscribe({next:e=>{this.proyecto=e,this.buildImagesFromProyecto(e),this.isLoading=!1},error:e=>{console.error("Error al cargar detalle del proyecto",e),this.isLoading=!1}})}buildImagesFromProyecto(t){let e=[];t.imagen_urls?.length&&e.push(...t.imagen_urls),t.imagenPrincipalUrl&&e.push(t.imagenPrincipalUrl),this.allImages=Array.from(new Set(e)),this.allImages.length?(this.currentImageIndex=0,this.selectedImage=this.allImages[0]):(this.currentImageIndex=0,this.selectedImage=null)}selectImage(t){let e=this.allImages.indexOf(t);e!==-1&&(this.currentImageIndex=e,this.selectedImage=t)}openLightbox(t){if(this.allImages.length){if(t){let e=this.allImages.indexOf(t);e!==-1&&(this.currentImageIndex=e)}else if(this.selectedImage){let e=this.allImages.indexOf(this.selectedImage);e!==-1&&(this.currentImageIndex=e)}this.lightboxImage=this.allImages[this.currentImageIndex],this.lightboxOpen=!0}}closeLightbox(){this.lightboxOpen=!1,this.lightboxImage=null}nextImage(){this.allImages.length&&(this.currentImageIndex=(this.currentImageIndex+1)%this.allImages.length,this.updateSelectedFromIndex())}prevImage(){this.allImages.length&&(this.currentImageIndex=(this.currentImageIndex-1+this.allImages.length)%this.allImages.length,this.updateSelectedFromIndex())}updateSelectedFromIndex(){this.lightboxImage=this.allImages[this.currentImageIndex],this.selectedImage=this.lightboxImage}handleKeyboard(t){this.lightboxOpen&&(t.key==="Escape"?this.closeLightbox():t.key==="ArrowRight"?this.nextImage():t.key==="ArrowLeft"&&this.prevImage())}isChatbotVisible=!1;toggleChatbot(){this.isChatbotVisible=!this.isChatbotVisible,setTimeout(()=>{let t=document.getElementById("chatbot-container"),e=document.getElementById("chatbot-toggle");this.isChatbotVisible?(t?.classList.remove("chatbot-hidden"),t?.classList.add("chatbot-visible"),e?.classList.add("chatbot-active")):(t?.classList.remove("chatbot-visible"),t?.classList.add("chatbot-hidden"),e?.classList.remove("chatbot-active"))},10)}initializeChatbot(){setTimeout(()=>{let t=document.getElementById("chatbot-container"),e=document.getElementById("chatbot-toggle");t?.classList.add("chatbot-hidden"),e?.classList.remove("chatbot-active"),e?.addEventListener("click",()=>{this.toggleChatbot()})},100)}static \u0275fac=function(e){return new(e||n)(y(B),y(N))};static \u0275cmp=M({type:n,selectors:[["app-detalle-proyecto"]],hostBindings:function(e,d){e&1&&g("keydown",function(v){return d.handleKeyboard(v)},!1,O)},decls:11,vars:3,consts:[["notFoundTpl",""],["class","detalle-proyecto-page",4,"ngIf"],["class","detalle-proyecto-page",4,"ngIf","ngIfElse"],["id","chatbot-toggle",1,"chatbot-toggle-hidden"],[1,"chatbot-icon"],[1,"close-icon"],["id","chatbot-container",1,"chatbot-hidden"],["src",I`https://page.botpenguin.com/690c1346ff158e42155339eb/690c1052cde802431fa13ff0`,"id","chatbot-frame","allow","microphone; camera"],[1,"detalle-proyecto-page"],[1,"container"],[1,"detalle-header"],[1,"detalle-title"],["class","badge badge-proyecto-cliente",4,"ngIf"],["class","detalle-galeria",4,"ngIf"],["class","lightbox-backdrop",3,"click",4,"ngIf"],[1,"proyecto-meta-row"],[1,"badge",3,"ngClass"],["class","proyecto-presupuesto",4,"ngIf"],["class","proyecto-fechas",4,"ngIf"],[1,"detalle-section"],[1,"descripcion"],[1,"volver-container"],["routerLink","/proyectos",1,"btn-primary"],[1,"badge","badge-proyecto-cliente"],[1,"detalle-galeria"],["class","galeria-principal",4,"ngIf"],["class","galeria-thumbs",4,"ngIf"],[1,"galeria-principal"],[3,"click","src","alt"],[1,"galeria-thumbs"],["type","button","class","thumb-btn",3,"is-active","click",4,"ngFor","ngForOf"],["type","button",1,"thumb-btn",3,"click"],[3,"src","alt"],[1,"lightbox-backdrop",3,"click"],[1,"lightbox-content",3,"click"],["type","button",1,"lightbox-close",3,"click"],["type","button","class","lightbox-prev",3,"click",4,"ngIf"],["type","button","class","lightbox-next",3,"click",4,"ngIf"],["type","button",1,"lightbox-prev",3,"click"],["type","button",1,"lightbox-next",3,"click"],[1,"proyecto-presupuesto"],[1,"presupuesto-label"],[1,"presupuesto-valor"],[1,"proyecto-fechas"],[1,"timeline"],["class","timeline-item",4,"ngIf"],[1,"timeline-item"],[1,"timeline-dot"],[1,"timeline-content"],[1,"timeline-label"],[1,"timeline-date"],[1,"timeline-dot","timeline-dot-end"]],template:function(e,d){if(e&1&&(p(0,K,4,0,"div",1)(1,oe,22,15,"div",2)(2,ae,7,0,"ng-template",null,0,S),i(4,"button",3)(5,"span",4),r(6,"\u{1F4AC}"),o(),i(7,"span",5),r(8,"\u2715"),o()(),i(9,"div",6),b(10,"iframe",7),o()),e&2){let s=k(3);c("ngIf",d.isLoading),a(),c("ngIf",!d.isLoading&&d.proyecto)("ngIfElse",s)}},dependencies:[A,T,z,L,V,j,F,U,R],styles:['[_nghost-%COMP%]{display:block;background-color:var(--color-bg);padding:40px 0}.container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 20px}.detalle-proyecto-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#495057}.detalle-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.detalle-title[_ngcontent-%COMP%]{font-size:clamp(2.4rem,4vw,3.2rem);color:var(--color-primary);font-weight:800;letter-spacing:.08em;text-transform:capitalize;margin:0 0 2.5rem;position:relative}.detalle-title[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;bottom:-12px;transform:translate(-50%);width:90px;height:4px;border-radius:999px;background:var(--color-primary);box-shadow:0 4px 12px #0000002e}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.5em .8em;font-size:.85em;font-weight:600;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;margin:0 5px}.badge-proyecto-cliente[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;margin-top:1.25rem;padding:.55em 1.3em;border-radius:999px;background:#0000000f;color:var(--color-primary);text-transform:uppercase;letter-spacing:.12em;font-size:.8rem;font-weight:700;border:1px solid rgba(0,0,0,.06);backdrop-filter:blur(6px);box-shadow:0 8px 20px #00000014}.badge-proyecto-cliente[_ngcontent-%COMP%]:before{content:"\\2605";font-size:.9rem;opacity:.9}.badge-activo[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-inactivo[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.badge-completado[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.proyecto-meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1.5rem;margin-bottom:1.5rem;flex-wrap:wrap}.proyecto-presupuesto[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.4rem;font-size:.95rem}.presupuesto-label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;text-transform:uppercase;letter-spacing:.08em;font-size:.75rem}.presupuesto-valor[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary);font-size:1rem}.proyecto-fechas[_ngcontent-%COMP%]{margin-bottom:2rem}.timeline[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3rem;position:relative;padding:1.5rem 0 .5rem}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:2.1rem;left:50%;transform:translate(-50%);width:70%;max-width:420px;height:2px;background:linear-gradient(90deg,rgba(0,0,0,0),var(--color-primary),rgba(0,0,0,0));opacity:.25}.timeline-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.timeline-dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:var(--color-primary);box-shadow:0 0 0 4px #007bff33;margin-bottom:.4rem}.timeline-dot-end[_ngcontent-%COMP%]{background:var(--color-accent);box-shadow:0 0 0 4px #ffc10733}.timeline-content[_ngcontent-%COMP%]{text-align:center}.timeline-label[_ngcontent-%COMP%]{display:block;text-transform:uppercase;letter-spacing:.12em;font-size:.72rem;color:#6c757d;font-weight:700;margin-bottom:.15rem}.timeline-date[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#343a40}.volver-container[_ngcontent-%COMP%]{text-align:center;margin-top:40px;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:12px 28px;border-radius:50px;text-decoration:none;font-weight:600;transition:background-color .3s ease,transform .2s ease,box-shadow .2s ease;display:inline-block}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#004b99;transform:translateY(-1px) scale(1.01);box-shadow:0 10px 25px #0000001f}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]{flex-direction:column;gap:1.25rem}.timeline[_ngcontent-%COMP%]:before{width:2px;height:80%;top:50%;left:50%;transform:translate(-50%,-50%)}}.detalle-section[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:30px;border-radius:12px;box-shadow:0 4px 15px #00000012;margin-bottom:30px}.detalle-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--color-primary);font-weight:600;margin-bottom:20px;border-bottom:1px solid var(--color-border);padding-bottom:10px}.descripcion[_ngcontent-%COMP%]{font-size:1.1rem;color:#495057;line-height:1.6}.detalle-galeria[_ngcontent-%COMP%]{margin:2rem 0}.galeria-principal[_ngcontent-%COMP%]{width:100%;border-radius:12px;overflow:hidden;cursor:zoom-in;aspect-ratio:16 / 9;background:#f3f3f3;display:flex;align-items:center;justify-content:center}.galeria-principal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;display:block;object-fit:contain;transition:transform .3s ease}.galeria-principal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.galeria-thumbs[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:nowrap;gap:.75rem;margin-top:1rem;overflow-x:auto;width:100%;padding-bottom:.5rem}.galeria-thumbs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.galeria-thumbs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.thumb-btn[_ngcontent-%COMP%]{border:none;padding:0;background:transparent;border-radius:8px;overflow:hidden;cursor:pointer;flex:0 0 auto;outline:none;transition:transform .2s ease,box-shadow .2s ease}.thumb-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;display:block;opacity:.5;transition:opacity .2s ease,transform .2s ease}.thumb-btn.is-active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;transform:translateY(-2px)}.thumb-btn.is-active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #007bff}.lightbox-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:999}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;align-items:center;justify-content:center}.lightbox-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%;display:block;object-fit:contain;border-radius:8px;background:#000}.lightbox-close[_ngcontent-%COMP%]{position:absolute;top:-2.5rem;right:0;border:none;background:transparent;color:#fff;font-size:2rem;cursor:pointer}.lightbox-prev[_ngcontent-%COMP%], .lightbox-next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);border:none;background:#0009;color:#fff;font-size:2rem;width:2.5rem;height:2.5rem;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.lightbox-prev[_ngcontent-%COMP%]{left:-3rem}.lightbox-next[_ngcontent-%COMP%]{right:-3rem}@media (max-width: 768px){.lightbox-prev[_ngcontent-%COMP%]{left:.5rem}.lightbox-next[_ngcontent-%COMP%]{right:.5rem}}@media (max-width: 768px){.detalle-title[_ngcontent-%COMP%]{font-size:2.1rem;letter-spacing:.06em}.detalle-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px}.detalle-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15px}.descripcion[_ngcontent-%COMP%]{font-size:1rem}}#chatbot-toggle[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:70px;height:70px;background:linear-gradient(135deg,var(--color-primary) 0%,#0a3a63 100%);border:none;border-radius:50%;box-shadow:0 5px 20px #0000004d;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10000;transition:all .3s ease;overflow:hidden}#chatbot-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 8px 25px #0006}.chatbot-icon[_ngcontent-%COMP%], .close-icon[_ngcontent-%COMP%]{font-size:28px;transition:all .3s ease;position:absolute}.close-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(.5)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-accent) 0%,#e55a2b 100%)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]   .chatbot-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(.5)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}#chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:110px;right:30px;width:380px;height:500px;z-index:9999;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #0000004d;transition:all .3s ease}#chatbot-container.chatbot-hidden[_ngcontent-%COMP%]{opacity:0;transform:scale(0) translateY(20px);pointer-events:none}#chatbot-container.chatbot-visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1) translateY(0);pointer-events:all}#chatbot-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:none;background:#fff}@media (max-width: 600px){#chatbot-container[_ngcontent-%COMP%]{width:95%;height:70%;bottom:100px;right:2.5%;left:2.5%}#chatbot-toggle[_ngcontent-%COMP%]{bottom:20px;right:20px;width:60px;height:60px}.chatbot-icon[_ngcontent-%COMP%], .close-icon[_ngcontent-%COMP%]{font-size:24px}}@keyframes _ngcontent-%COMP%_pulse-chatbot{0%{box-shadow:0 0 #ffc107b3}70%{box-shadow:0 0 0 10px #ffc10700}to{box-shadow:0 0 #ffc10700}}#chatbot-toggle.has-notification[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-chatbot 2s infinite}.about-preview-section[_ngcontent-%COMP%], .servicios-section[_ngcontent-%COMP%], .proyectos-section[_ngcontent-%COMP%], .testimonios-section[_ngcontent-%COMP%]{background-color:var(--color-bg-dark);color:var(--color-text-light)}.about-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .about-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .servicios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .proyectos-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .testimonios-section[_ngcontent-%COMP%]{color:var(--color-text-light)!important}']})};export{Y as DetalleProyectoComponent};
