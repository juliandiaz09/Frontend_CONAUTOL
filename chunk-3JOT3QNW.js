import{a as E}from"./chunk-ZBPZLCUJ.js";import{a as O}from"./chunk-RQKZCHIK.js";import{b as G,c as S,d as M,e as U,g as f}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Eb as o,Fb as F,Gb as P,La as m,O as L,Ob as T,Pb as j,Qa as u,Va as p,Wa as D,Z as C,_ as x,_a as y,fb as g,kc as V,lc as $,mc as B,nb as n,ob as r,pb as s,tb as I,tc as b,ub as d,vb as v}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";var Q=(a,i,e)=>({"bg-success":a,"bg-warning":i,"bg-info":e}),W=(a,i)=>({"bg-success":a,"bg-warning":i});function X(a,i){a&1&&(n(0,"div",14),o(1,"Cargando datos..."),r())}function Y(a,i){if(a&1&&(n(0,"div",15),o(1),r()),a&2){let e=v();m(),P(" ",e.error," ")}}function Z(a,i){if(a&1){let e=I();n(0,"tr")(1,"td",16),o(2),r(),n(3,"td")(4,"span",17),o(5),r()(),n(6,"td")(7,"div",18)(8,"button",19),d("click",function(){let c=C(e).$implicit,l=v();return x(l.navegarA("/admin/proyectos/editar/"+c.id))}),s(9,"i",20),o(10," Editar "),r(),n(11,"button",21),d("click",function(){let c=C(e).$implicit,l=v();return x(l.eliminarProyecto(c.id))}),s(12,"i",22),o(13," Eliminar "),r()()()()}if(a&2){let e=i.$implicit;m(2),F(e.nombre),m(2),g("ngClass",j(3,Q,e.estado==="activo",e.estado==="inactivo",e.estado==="completado")),m(),P(" ",e.estado," ")}}function z(a,i){if(a&1){let e=I();n(0,"tr")(1,"td",16),o(2),r(),n(3,"td")(4,"span",17),o(5),r()(),n(6,"td")(7,"div",18)(8,"button",19),d("click",function(){let c=C(e).$implicit,l=v();return x(l.navegarA("/admin/servicios/editar/"+c.id))}),s(9,"i",20),o(10," Editar "),r(),n(11,"button",21),d("click",function(){let c=C(e).$implicit,l=v();return x(l.eliminarServicio(c.id))}),s(12,"i",22),o(13," Eliminar "),r()()()()}if(a&2){let e=i.$implicit;m(2),F(e.nombre),m(2),g("ngClass",T(3,W,e.estado==="activo",e.estado==="inactivo")),m(),P(" ",e.estado," ")}}var h=class a{constructor(i,e){this.apiService=i;this.router=e}loading=!1;error=null;proyectos=[];servicios=[];isSubmittingProyecto=!1;isSubmittingServicio=!1;ngOnInit(){this.cargarDatos()}navegarA(i){this.router.navigate([i])}cargarDatos(){this.loading=!0,this.apiService.getProyectos().subscribe({next:i=>{this.proyectos=i,this.loading=!1},error:i=>{this.error="Error al cargar los proyectos",this.loading=!1,console.error("Error:",i)}}),this.apiService.getServicios().subscribe({next:i=>{this.servicios=i},error:i=>{this.error=this.error?this.error+" y servicios":"Error al cargar los servicios",console.error("Error:",i)}})}crearProyecto(i){this.isSubmittingProyecto=!0,this.apiService.crearProyecto(i).subscribe({next:e=>{let t=[];e.imagen_url&&t.push(e.imagen_url),Array.isArray(e.imagen_urls)&&(t=[...t,...e.imagen_urls]),t=[...new Set(t)];let c={id:e.id,nombre:e.nombre,descripcion:e.descripcion||"",descripcionCorta:e.descripcion?e.descripcion.substring(0,100)+"...":"",imagen_urls:t,imagenUrl:t[0]||"",estado:e.estado||"activo",cliente:e.cliente||""};this.proyectos.push(c),this.isSubmittingProyecto=!1,this.navegarA("/admin/proyectos/nuevo")},error:e=>{this.error="Error al crear el proyecto",this.isSubmittingProyecto=!1,console.error("Error al crear el proyecto:",e)}})}editarProyecto(i,e){this.isSubmittingProyecto=!0,this.apiService.actualizarProyecto(i,e).subscribe({next:t=>{let c=[];t.imagen_url&&c.push(t.imagen_url),Array.isArray(t.imagen_urls)&&(c=[...c,...t.imagen_urls]),c=[...new Set(c)];let l={id:t.id,nombre:t.nombre,descripcion:t.descripcion||"",descripcionCorta:t.descripcion?t.descripcion.substring(0,100)+"...":"",imagen_urls:c,imagenUrl:c[0]||"",estado:t.estado||"activo",cliente:t.cliente||""};this.proyectos=this.proyectos.map(N=>N.id===i?l:N),this.isSubmittingProyecto=!1,this.navegarA("/admin/proyectos/editar/"+e.id)},error:t=>{this.error="Error al editar el proyecto",this.isSubmittingProyecto=!1,console.error("Error al editar el proyecto:",t)}})}crearServicio(i){this.isSubmittingServicio=!0,this.apiService.crearServicio(i).subscribe({next:e=>{let t={id:e.id,nombre:e.nombre,descripcion:e.descripcion||"",descripcionCorta:e.descripcion?e.descripcion.substring(0,100)+"...":"",imagen_url:e.imagen_url||"",imagenUrl:e.imagen_url||"",estado:e.estado||"activo"};this.servicios.push(t),this.isSubmittingServicio=!1,this.navegarA("/admin/servicios/nuevo")},error:e=>{this.error="Error al crear el servicio",this.isSubmittingServicio=!1,console.error("Error al crear el servicio:",e)}})}editarServicio(i,e){this.isSubmittingServicio=!0,this.apiService.actualizarServicio(i,e).subscribe({next:t=>{let c={id:t.id,nombre:t.nombre,descripcion:t.descripcion||"",descripcionCorta:t.descripcion?t.descripcion.substring(0,100)+"...":"",imagen_url:t.imagen_url||"",imagenUrl:t.imagen_url||"",estado:t.estado||"activo"};this.servicios=this.servicios.map(l=>l.id===i?c:l),this.isSubmittingServicio=!1,this.navegarA("/admin/servicios/editar/"+e.id)},error:t=>{this.error="Error al editar el servicio",this.isSubmittingServicio=!1,console.error("Error al editar el servicio:",t)}})}eliminarProyecto(i){confirm("\xBFEst\xE1 seguro de que desea eliminar este proyecto?")&&this.apiService.eliminarProyecto(i).subscribe({next:()=>{this.proyectos=this.proyectos.filter(e=>e.id!==i),this.cargarDatos()},error:e=>{console.error("Error al eliminar el proyecto:",e),this.error="Error al eliminar el proyecto"}})}eliminarServicio(i){confirm("\xBFEst\xE1 seguro de que desea eliminar este servicio?")&&this.apiService.eliminarServicio(i).subscribe({next:()=>{this.servicios=this.servicios.filter(e=>e.id!==i),this.cargarDatos()},error:e=>{console.error("Error al eliminar el servicio:",e),this.error="Error al eliminar el servicio"}})}static \u0275fac=function(e){return new(e||a)(u(O),u(S))};static \u0275cmp=p({type:a,selectors:[["app-panel-inicio"]],decls:50,vars:4,consts:[[1,"container","admin-dashboard"],[1,"dashboard-header"],[1,"muted"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"dashboard-content"],[1,"card"],[1,"card-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"name-cell"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"]],template:function(e,t){e&1&&(n(0,"div",0),s(1,"app-back-button"),n(2,"header",1)(3,"h1"),o(4,"Panel de Administraci\xF3n"),r(),n(5,"p",2),o(6," Bienvenido al panel de administraci\xF3n. Aqu\xED puedes gestionar los proyectos y servicios de la plataforma. "),r()(),y(7,X,2,0,"div",3)(8,Y,2,1,"div",4),n(9,"div",5)(10,"div",6)(11,"div",7)(12,"h2"),o(13,"Proyectos"),r(),n(14,"button",8),d("click",function(){return t.navegarA("/admin/proyectos/nuevo")}),s(15,"i",9),o(16," Nuevo Proyecto "),r()(),n(17,"div",10)(18,"div",11)(19,"table",12)(20,"thead")(21,"tr")(22,"th"),o(23,"Nombre"),r(),n(24,"th"),o(25,"Estado"),r(),n(26,"th"),o(27,"Acciones"),r()()(),n(28,"tbody"),y(29,Z,14,7,"tr",13),r()()()()(),n(30,"div",6)(31,"div",7)(32,"h2"),o(33,"Servicios"),r(),n(34,"button",8),d("click",function(){return t.navegarA("/admin/servicios/nuevo")}),s(35,"i",9),o(36," Nuevo Servicio "),r()(),n(37,"div",10)(38,"div",11)(39,"table",12)(40,"thead")(41,"tr")(42,"th"),o(43,"Nombre"),r(),n(44,"th"),o(45,"Estado"),r(),n(46,"th"),o(47,"Acciones"),r()()(),n(48,"tbody"),y(49,z,14,6,"tr",13),r()()()()()()()),e&2&&(m(7),g("ngIf",t.loading),m(),g("ngIf",t.error),m(21),g("ngForOf",t.proyectos),m(20),g("ngForOf",t.servicios))},dependencies:[b,V,$,B,f,E],styles:[".admin-dashboard[_ngcontent-%COMP%]{padding:40px 20px}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:40px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--color-primary, #0f4c81)}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:40px}@media (min-width: 992px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.card[_ngcontent-%COMP%]{background-color:var(--color-surface, #fff);border-radius:12px;box-shadow:0 8px 16px #0000000d;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background-color:#f8f9fa;border-bottom:1px solid var(--color-border, #e6e9ee)}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0}.card-body[_ngcontent-%COMP%]{padding:20px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid var(--color-border, #e6e9ee)}.name-cell[_ngcontent-%COMP%]{max-width:200px;white-space:normal;word-wrap:break-word}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.badge[_ngcontent-%COMP%]{padding:5px 10px;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:capitalize}.bg-success[_ngcontent-%COMP%]{background-color:#7d7;color:#fff}.bg-warning[_ngcontent-%COMP%]{background-color:#ffb347;color:#fff}.bg-info[_ngcontent-%COMP%]{background-color:#aec6cf;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}"]})};var _=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=p({type:a,selectors:[["app-configuracion"]],decls:38,vars:0,consts:[[1,"container","admin-section"],[1,"section-header"],[1,"muted"],[1,"settings-content"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"setting-card"],[1,"card-title"],[1,"card-text"],[1,"d-flex","gap-2"],["routerLink","/admin/proyectos",1,"btn","btn-outline-primary"],[1,"fas","fa-folder"],["routerLink","/admin/servicios",1,"btn","btn-outline-primary"],[1,"fas","fa-concierge-bell"],["disabled","",1,"btn","btn-outline-secondary"],[1,"fas","fa-cog"]],template:function(e,t){e&1&&(n(0,"div",0),s(1,"app-back-button"),n(2,"header",1)(3,"h1"),o(4,"Configuraci\xF3n del Sistema"),r(),n(5,"p",2),o(6," Ajustes y configuraci\xF3n de los m\xF3dulos de la aplicaci\xF3n. "),r()(),n(7,"div",3)(8,"div",4)(9,"div",5)(10,"h2"),o(11,"Opciones de Administraci\xF3n"),r()(),n(12,"div",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",6)(17,"h5",10),o(18,"Gesti\xF3n de Contenido"),r(),n(19,"p",11),o(20," Configura los m\xF3dulos de proyectos y servicios. "),r(),n(21,"div",12)(22,"a",13),s(23,"i",14),o(24," Proyectos "),r(),n(25,"a",15),s(26,"i",16),o(27," Servicios "),r()()()()(),n(28,"div",8)(29,"div",9)(30,"div",6)(31,"h5",10),o(32,"Ajustes Generales"),r(),n(33,"p",11),o(34,"Configuraci\xF3n general del sistema."),r(),n(35,"button",17),s(36,"i",18),o(37," Pr\xF3ximamente "),r()()()()()()()()())},dependencies:[b,f,M,E],styles:[".admin-section[_ngcontent-%COMP%]{padding:40px 20px}.section-header[_ngcontent-%COMP%]{margin-bottom:40px}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--color-primary, #0f4c81)}.settings-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--color-surface, #fff);border-radius:12px;box-shadow:0 8px 16px #0000000d;overflow:hidden}.settings-content[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;border-bottom:1px solid var(--color-border, #e6e9ee)}.settings-content[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0}.setting-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;height:100%}.setting-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:10px}.setting-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{color:var(--color-muted, #6b7280);margin-bottom:20px}.btn-outline-primary[_ngcontent-%COMP%]{color:var(--color-primary, #0f4c81);border-color:var(--color-primary, #0f4c81)}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary, #0f4c81);color:#fff}"]})};var w=class a{constructor(i,e){this.apiService=i;this.router=e}logout(){this.apiService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||a)(u(O),u(S))};static \u0275cmp=p({type:a,selectors:[["app-admin-navbar"]],decls:24,vars:0,consts:[[1,"admin-header"],[1,"container"],[1,"header-content"],[1,"logo"],["routerLink","/admin"],[1,"main-nav"],["routerLink","/admin/panel","routerLinkActive","active"],["routerLink","/admin/proyectos","routerLinkActive","active"],["routerLink","/admin/servicios","routerLinkActive","active"],["routerLink","/admin/configuracion","routerLinkActive","active"],[1,"user-menu"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(e,t){e&1&&(n(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),o(5,"Admin Panel"),r()(),n(6,"nav",5)(7,"ul")(8,"li")(9,"a",6),o(10,"Dashboard"),r()(),n(11,"li")(12,"a",7),o(13,"Proyectos"),r()(),n(14,"li")(15,"a",8),o(16,"Servicios"),r()(),n(17,"li")(18,"a",9),o(19,"Configuraci\xF3n"),r()()()(),n(20,"div",10)(21,"button",11),d("click",function(){return t.logout()}),s(22,"i",12),o(23," Logout "),r()()()()())},dependencies:[M,U],styles:[".admin-header[_ngcontent-%COMP%]{background-color:var(--color-primary, #0f4c81);color:#fff;padding:0 20px;box-shadow:0 2px 4px #0000001a;height:76px;display:flex;align-items:center}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;text-decoration:none}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;gap:20px}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffc;text-decoration:none;padding:10px 15px;border-radius:8px;transition:background-color .3s,color .3s}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--color-accent, #ff6b35);color:#fff;font-weight:600}.user-menu[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(255,255,255,.2);color:#fff}.user-menu[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}"]})};var A=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=p({type:a,selectors:[["app-admin-layout"]],decls:2,vars:0,template:function(e,t){e&1&&s(0,"app-admin-navbar")(1,"router-outlet")},dependencies:[G,w],encapsulation:2})};var H=[{path:"",component:A,children:[{path:"",redirectTo:"panel",pathMatch:"full"},{path:"panel",component:h},{path:"configuracion",component:_},{path:"proyectos",loadChildren:()=>import("./chunk-HWWCZWGG.js").then(a=>a.GestionProyectosModule)},{path:"servicios",loadChildren:()=>import("./chunk-ATNKRSYC.js").then(a=>a.GestionServiciosModule)}]}];var J=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=D({type:a});static \u0275inj=L({imports:[b,f.forChild(H),h,_,f]})};export{J as AdministradorModule};
