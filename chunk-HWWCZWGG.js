import{a as Z}from"./chunk-ZBPZLCUJ.js";import{b as G,c as v,d as q,e as $,g as H,h as U,j as J,k as W,l as Y,m as K,n as Q,o as fe,p as X,r as V}from"./chunk-U6PYTPUR.js";import{a as T}from"./chunk-RQKZCHIK.js";import{a as ue,c as R,d as N,g as O}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Eb as r,Fb as L,Gb as u,Ha as I,Hb as B,La as l,Nb as le,O as re,Pb as se,Qa as C,Qb as F,Rb as de,Sb as j,Va as w,Wa as ce,Z as b,_ as x,_a as p,fb as s,ga as ae,hb as E,kc as me,lc as k,mc as S,nb as i,ob as n,pb as _,rc as pe,sc as ge,tb as P,tc as y,ub as g,vb as d}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";function he(o,t){if(o&1&&(i(0,"div",9)(1,"h3"),r(2),n(),i(3,"p")(4,"strong"),r(5,"Descripci\xF3n:"),n(),r(6),n(),i(7,"p")(8,"strong"),r(9,"Cliente:"),n(),r(10),n(),i(11,"p")(12,"strong"),r(13,"Estado:"),n(),r(14),n(),i(15,"p")(16,"strong"),r(17,"Fecha de Inicio:"),n(),r(18),F(19,"date"),n(),i(20,"p")(21,"strong"),r(22,"Fecha de Fin:"),n(),r(23),F(24,"date"),n(),i(25,"p")(26,"strong"),r(27,"Presupuesto:"),n(),r(28),F(29,"currency"),n(),i(30,"p")(31,"strong"),r(32,"Creado:"),n(),r(33),F(34,"date"),n(),i(35,"p")(36,"strong"),r(37,"Actualizado:"),n(),r(38),F(39,"date"),n()()),o&2){let e=d();l(2),L(e.proyecto.nombre),l(4),u(" ",e.proyecto.descripcion,""),l(4),u(" ",e.proyecto.cliente,""),l(4),u(" ",e.proyecto.estado,""),l(4),u(" ",j(19,9,e.proyecto.fecha_inicio,"short"),""),l(5),u(" ",j(24,12,e.proyecto.fecha_fin,"short"),""),l(5),u(" ",de(29,15,e.proyecto.presupuesto),""),l(5),u(" ",j(34,17,e.proyecto.created_at,"short"),""),l(5),u(" ",j(39,20,e.proyecto.updated_at,"short"),"")}}var ee=class o{proyecto=null;cerrar=new ae;isChatbotVisible=!1;ngOnInit(){this.isChatbotVisible=!1}toggleChatbot(){this.isChatbotVisible=!this.isChatbotVisible}onCerrar(){this.cerrar.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["app-detalles-proyecto"]],inputs:{proyecto:"proyecto"},outputs:{cerrar:"cerrar"},decls:11,vars:1,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close",3,"click"],[1,"fas","fa-times"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"modal-body"]],template:function(e,a){e&1&&(i(0,"div",0),g("click",function(){return a.cerrar.emit()}),n(),i(1,"div",1)(2,"div",2)(3,"h2",3),r(4,"Detalles del Proyecto"),n(),i(5,"button",4),g("click",function(){return a.cerrar.emit()}),_(6,"i",5),n()(),p(7,he,40,23,"div",6),i(8,"div",7)(9,"button",8),g("click",function(){return a.cerrar.emit()}),r(10,"Cerrar"),n()()()),e&2&&(l(7),s("ngIf",a.proyecto))},dependencies:[y,S,ge,pe],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1040}.modal-content[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:5px;z-index:1050;width:80%;max-width:600px;box-shadow:0 5px 15px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;padding-bottom:10px;margin-bottom:10px}.modal-title[_ngcontent-%COMP%]{margin:0}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:10px 0}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #eee;padding-top:10px;margin-top:10px;text-align:right}"]})};var Ce=(o,t,e)=>({"bg-success":o,"bg-info":t,"bg-warning":e}),ye=o=>["editar",o];function Me(o,t){o&1&&(i(0,"div",21),_(1,"span",22),n())}function Oe(o,t){if(o&1&&(i(0,"div",23),r(1),n()),o&2){let e=d();l(),u(" ",e.error," ")}}function we(o,t){if(o&1){let e=P();i(0,"div",24)(1,"div",25),_(2,"img",26),i(3,"div",27)(4,"button",28),g("click",function(){let c=b(e).$implicit,m=d();return x(m.eliminarProyecto(c.id))}),_(5,"i",29),n()()(),i(6,"div",30)(7,"h2",31),r(8),n(),i(9,"p",32),r(10),n(),i(11,"div",33)(12,"span",2),r(13),n(),i(14,"span",34),r(15),n()(),i(16,"a",35),r(17,"Editar"),n(),i(18,"button",36),g("click",function(){let c=b(e).$implicit,m=d();return x(m.verDetalles(c))}),r(19,"Detalles"),n()()()}if(o&2){let e=t.$implicit;l(2),s("src",(e.imagen_urls==null?null:e.imagen_urls[0])||"assets/img/placeholder.jpg",I)("alt",e.nombre),l(6),L(e.nombre),l(2),L(e.descripcion),l(3),u("Cliente: ",e.cliente,""),l(),s("ngClass",se(8,Ce,e.estado==="activo",e.estado==="completado",e.estado==="inactivo")),l(),u(" ",e.estado," "),l(),s("routerLink",le(12,ye,e.id))}}function Se(o,t){o&1&&(i(0,"div",37)(1,"p"),r(2,"No se encontraron proyectos con los filtros seleccionados."),n()())}function Ee(o,t){if(o&1){let e=P();i(0,"app-detalles-proyecto",38),g("cerrar",function(){b(e);let c=d();return x(c.cerrarDetalles())}),n()}if(o&2){let e=d();s("proyecto",e.selectedProyecto)}}var D=class o{constructor(t){this.api=t}proyectos=[];filteredProyectos=[];isLoading=!1;error=null;selectedProyecto=null;searchTerm="";statusFilter="";ngOnInit(){this.cargarProyectos()}cargarProyectos(){this.isLoading=!0,this.error=null,this.api.getProyectos().subscribe({next:t=>{this.proyectos=t,this.applyFilters(),this.isLoading=!1},error:t=>{this.error="Error al cargar los proyectos",this.isLoading=!1}})}eliminarProyecto(t){confirm("\xBFEst\xE1s seguro de que deseas eliminar este proyecto?")&&this.api.eliminarProyecto(t).subscribe({next:()=>{this.proyectos=this.proyectos.filter(e=>e.id!==t),this.applyFilters()},error:e=>{alert("Error al eliminar el proyecto")}})}verDetalles(t){this.api.getProyecto(t.id).subscribe({next:e=>{this.selectedProyecto=e},error:e=>{this.error="Error al cargar los detalles del proyecto."}})}cerrarDetalles(){this.selectedProyecto=null}onSearch(t){this.searchTerm=t.target.value,this.applyFilters()}onStatusChange(t){this.statusFilter=t.target.value,this.applyFilters()}applyFilters(){this.filteredProyectos=this.proyectos.filter(t=>{let e=t.nombre.toLowerCase().includes(this.searchTerm.toLowerCase())||t.cliente&&t.cliente.toLowerCase().includes(this.searchTerm.toLowerCase()),a=this.statusFilter===""||t.estado===this.statusFilter;return e&&a})}static \u0275fac=function(e){return new(e||o)(C(T))};static \u0275cmp=w({type:o,selectors:[["app-listar-proyectos"]],decls:30,vars:5,consts:[[1,"container","admin-section"],[1,"section-header"],[1,"muted"],["routerLink","nuevo",1,"btn","btn-primary"],[1,"fas","fa-plus"],[1,"filters-container"],[1,"search-bar"],["type","text","placeholder","Buscar por nombre o cliente...",3,"input"],[1,"fas","fa-search"],[1,"filter-controls"],[3,"change"],["value",""],["value","activo"],["value","inactivo"],["value","completado"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"grid-cards"],["class","card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[3,"proyecto","cerrar",4,"ngIf"],[1,"text-center","py-4"],[1,"loading","loading-spinner","loading-lg"],[1,"alert","alert-danger"],[1,"card"],[1,"card-image"],[3,"src","alt"],[1,"card-actions"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-footer"],[1,"badge",3,"ngClass"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-info",3,"click"],[1,"empty-state"],[3,"cerrar","proyecto"]],template:function(e,a){e&1&&(i(0,"div",0),_(1,"app-back-button"),i(2,"header",1)(3,"h1"),r(4,"Gesti\xF3n de Proyectos"),n(),i(5,"p",2),r(6," Crea, edita y elimina los proyectos de la plataforma. "),n(),i(7,"a",3),_(8,"i",4),r(9," Nuevo Proyecto "),n()(),i(10,"div",5)(11,"div",6)(12,"input",7),g("input",function(m){return a.onSearch(m)}),n(),_(13,"i",8),n(),i(14,"div",9)(15,"select",10),g("change",function(m){return a.onStatusChange(m)}),i(16,"option",11),r(17,"Todos los estados"),n(),i(18,"option",12),r(19,"Activo"),n(),i(20,"option",13),r(21,"Inactivo"),n(),i(22,"option",14),r(23,"Completado"),n()()()(),p(24,Me,2,0,"div",15)(25,Oe,2,1,"div",16),i(26,"div",17),p(27,we,20,14,"div",18),n(),p(28,Se,3,0,"div",19),n(),p(29,Ee,1,1,"app-detalles-proyecto",20)),e&2&&(l(24),s("ngIf",a.isLoading),l(),s("ngIf",a.error),l(2),s("ngForOf",a.filteredProyectos),l(),s("ngIf",!a.isLoading&&a.filteredProyectos.length===0),l(),s("ngIf",a.selectedProyecto))},dependencies:[y,me,k,S,O,N,Z,ee],styles:[".admin-section[_ngcontent-%COMP%]{padding:40px 20px}.section-header[_ngcontent-%COMP%]{margin-bottom:40px;display:flex;flex-direction:column;gap:10px}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--color-primary, #0f4c81)}.grid-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px}.card[_ngcontent-%COMP%]{background-color:var(--color-surface, #fff);border-radius:12px;box-shadow:0 8px 16px #0000000d;overflow:hidden;display:flex;flex-direction:column}.card-image[_ngcontent-%COMP%]{position:relative;height:200px}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-actions[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;opacity:0;transition:opacity .3s}.card[_ngcontent-%COMP%]:hover   .card-actions[_ngcontent-%COMP%]{opacity:1}.card-body[_ngcontent-%COMP%]{padding:20px;flex-grow:1;display:flex;flex-direction:column}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:10px}.card-text[_ngcontent-%COMP%]{color:var(--color-muted, #6b7280);flex-grow:1;margin-bottom:20px}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:var(--color-muted, #6b7280)}",".filters-container[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:30px;align-items:center}.search-bar[_ngcontent-%COMP%]{position:relative;flex-grow:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 20px 12px 40px;border:1px solid var(--color-border, #e6e9ee);border-radius:8px;font-size:1rem}.search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--color-muted, #6b7280)}.filter-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;border:1px solid var(--color-border, #e6e9ee);border-radius:8px;background-color:#fff;font-size:1rem}"]})};function Fe(o,t){if(o&1&&(i(0,"span",49),r(1),n()),o&2){let e=d(2);l(),u(" - ",e.getImagenesSeleccionadas()," seleccionada(s) ")}}function ke(o,t){if(o&1){let e=P();i(0,"button",50),g("click",function(){b(e);let c=d(2);return x(c.toggleSeleccionarTodas(!0))}),r(1," Seleccionar todas "),n()}}function Ne(o,t){if(o&1){let e=P();i(0,"button",50),g("click",function(){b(e);let c=d(2);return x(c.toggleSeleccionarTodas(!1))}),r(1," Deseleccionar todas "),n()}}function Te(o,t){if(o&1){let e=P();i(0,"button",51),g("click",function(){b(e);let c=d(2);return x(c.eliminarSeleccionadas())}),r(1),n()}if(o&2){let e=d(2);l(),u(" \u{1F5D1}\uFE0F Eliminar ",e.getImagenesSeleccionadas()," ")}}function Ve(o,t){if(o&1){let e=P();i(0,"div",58)(1,"input",59),g("change",function(){b(e);let c=d().index,m=d(2);return x(m.toggleSeleccion(c))}),n()()}if(o&2){let e=d().$implicit;l(),s("checked",e.seleccionada)}}function De(o,t){o&1&&(i(0,"span",60),r(1," \u2B50 Principal "),n())}function ze(o,t){o&1&&(i(0,"span",61),r(1," Nueva "),n())}function Ae(o,t){if(o&1){let e=P();i(0,"button",62),g("click",function(){b(e);let c=d().index,m=d(2);return x(m.marcarParaEliminar(c))}),r(1," \u2715 "),n()}}function Le(o,t){if(o&1){let e=P();i(0,"div",52),p(1,Ve,2,1,"div",53),i(2,"img",54),g("click",function(){let c=b(e),m=c.$implicit,f=c.index,h=d(2);return x(!m.seleccionada&&h.establecerComoPrincipal(f))}),n(),p(3,De,2,0,"span",55)(4,ze,2,0,"span",56)(5,Ae,2,0,"button",57),n()}if(o&2){let e=t.$implicit;l(),s("ngIf",!e.isPrincipal),l(),E("border-blue-500",e.isPrincipal)("border-4",e.isPrincipal)("border-green-500",e.isNew&&!e.isPrincipal)("border-2",e.isNew&&!e.isPrincipal)("border-red-500",e.seleccionada)("border-2",e.seleccionada)("opacity-70",e.seleccionada)("border-gray-300",!e.isNew&&!e.isPrincipal&&!e.seleccionada),s("src",e.url,I),l(),s("ngIf",e.isPrincipal),l(),s("ngIf",e.isNew&&!e.isPrincipal),l(),s("ngIf",!e.isPrincipal)}}function je(o,t){if(o&1&&(i(0,"div",39)(1,"div",40)(2,"h3",41),r(3),p(4,Fe,2,1,"span",42),n(),i(5,"div",43),p(6,ke,2,0,"button",44)(7,Ne,2,0,"button",44)(8,Te,2,1,"button",45),n()(),i(9,"div",46),p(10,Le,6,21,"div",47),n(),i(11,"div",48)(12,"p"),r(13,"\u{1F4A1} "),i(14,"strong"),r(15,"Haz clic"),n(),r(16," en una imagen para establecerla como principal"),n(),i(17,"p"),r(18,"\u2611\uFE0F "),i(19,"strong"),r(20,"Marca el checkbox"),n(),r(21," para seleccionar im\xE1genes a eliminar"),n(),i(22,"p"),r(23,"\u2B50 La imagen principal "),i(24,"strong"),r(25,"no puede ser eliminada"),n(),r(26," (selecciona otra primero)"),n()()()),o&2){let e=d();l(3),u(" Im\xE1genes (",e.imagenesPreviews.length,") "),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(2),s("ngIf",e.imagenesPreviews.length>1),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(2),s("ngForOf",e.imagenesPreviews)}}function Be(o,t){if(o&1&&(i(0,"div",63)(1,"p",64),r(2),n()()),o&2){let e=d();l(2),B(" \u2713 ",e.imagenesNuevas.length," imagen(es) seleccionada(s) - ",e.getTotalFileSize()," ")}}function Re(o,t){if(o&1&&(i(0,"div",65),r(1),n()),o&2){let e=d();l(),u(" ",e.error," ")}}var z=class o{constructor(t,e,a){this.fb=t;this.api=e;this.router=a;this.proyectoForm=this.fb.group({nombre:["",[v.required,v.minLength(3)]],descripcion:["",v.required],estado:["activo",v.required],cliente:["",v.required],presupuesto:[null,[v.min(0)]],fecha_inicio:[null],fecha_fin:[null]})}proyectoForm;isSubmitting=!1;error=null;imagenesNuevas=[];imagenesPreviews=[];indicePrincipal=0;onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let a=Array.from(e.files),c=a.filter(f=>f.type.startsWith("image/"));if(c.length!==a.length){this.error="Algunos archivos no son im\xE1genes v\xE1lidas";return}let m=c.filter(f=>f.size<=5*1024*1024);if(m.length!==c.length){this.error="Algunas im\xE1genes superan el tama\xF1o m\xE1ximo de 5MB";return}this.imagenesNuevas.push(...m),m.forEach((f,h)=>{let M=new FileReader;M.onload=ve=>{let oe=this.imagenesPreviews.length===0&&h===0;this.imagenesPreviews.push({url:ve.target?.result,isNew:!0,file:f,isPrincipal:oe}),oe&&(this.indicePrincipal=0)},M.readAsDataURL(f)}),this.error=null,e.value=""}}marcarParaEliminar(t){let e=this.imagenesPreviews[t];if(this.imagenesPreviews.length===1){this.error="No puedes eliminar la \xFAnica imagen del proyecto";return}let a=this.imagenesNuevas.findIndex(c=>c===e.file);a!==-1&&this.imagenesNuevas.splice(a,1),this.imagenesPreviews.splice(t,1),t===this.indicePrincipal?(this.indicePrincipal=0,this.imagenesPreviews.length>0&&(this.imagenesPreviews[0].isPrincipal=!0)):t<this.indicePrincipal&&this.indicePrincipal--}establecerComoPrincipal(t){this.imagenesPreviews.forEach(e=>e.isPrincipal=!1),this.imagenesPreviews[t].isPrincipal=!0,this.indicePrincipal=t}getTotalFileSize(){return(this.imagenesNuevas.reduce((a,c)=>a+c.size,0)/(1024*1024)).toFixed(2)+" MB"}toggleSeleccionarTodas(t){this.imagenesPreviews.forEach(e=>{e.isPrincipal||(e.seleccionada=t)})}getImagenesSeleccionadas(){return this.imagenesPreviews.filter(t=>t.seleccionada).length}eliminarSeleccionadas(){let t=this.imagenesPreviews.map((e,a)=>e.seleccionada?a:-1).filter(e=>e!==-1);if(t.length===this.imagenesPreviews.length){this.error="No puedes eliminar todas las im\xE1genes del proyecto.";return}for(let e=t.length-1;e>=0;e--)this.marcarParaEliminar(t[e])}toggleSeleccion(t){this.imagenesPreviews[t]&&!this.imagenesPreviews[t].isPrincipal&&(this.imagenesPreviews[t].seleccionada=!this.imagenesPreviews[t].seleccionada)}onSubmit(){if(this.proyectoForm.invalid){this.proyectoForm.markAllAsTouched();return}this.isSubmitting=!0,this.error=null;let t=this.proyectoForm.value,e={nombre:t.nombre,descripcion:t.descripcion,estado:t.estado||"activo",cliente:t.cliente,presupuesto:t.presupuesto??0,fecha_inicio:t.fecha_inicio||null,fecha_fin:t.fecha_fin||null},a=new FormData;a.append("data",JSON.stringify(e)),this.imagenesNuevas.forEach(c=>{a.append("imagenes",c)}),console.log("\u{1F4E4} Total de archivos:",this.imagenesNuevas.length),this.api.crearProyecto(a).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigate(["/admin/proyectos"])},error:c=>{console.error("Error al crear el proyecto",c),this.error=c?.error?.error||"Error al crear el proyecto",this.isSubmitting=!1}})}static \u0275fac=function(e){return new(e||o)(C(X),C(T),C(R))};static \u0275cmp=w({type:o,selectors:[["app-crear-proyecto"]],decls:67,vars:6,consts:[[1,"container","admin-section"],[1,"section-header"],[1,"muted"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"card"],[1,"card-body"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4",1,"form-control"],["for","cliente"],["type","text","id","cliente","formControlName","cliente",1,"form-control"],[1,"row"],[1,"col-md-6"],["for","estado"],["id","estado","formControlName","estado",1,"form-control"],["value","activo"],["value","inactivo"],["value","completado"],["for","presupuesto"],["type","number","id","presupuesto","formControlName","presupuesto",1,"form-control"],[1,"grid","grid-cols-2","gap-4"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","date","formControlName","fecha_inicio",1,"input","input-bordered","w-full"],["type","date","formControlName","fecha_fin",1,"input","input-bordered","w-full"],[1,"label-text","font-semibold"],["class","mb-4",4,"ngIf"],["type","file","accept","image/*","multiple","",1,"file-input","file-input-bordered","w-full",3,"change"],[1,"text-xs","text-base-content/60","mt-1"],["class","mt-3 p-3 bg-blue-50 rounded text-sm space-y-1",4,"ngIf"],[1,"card-footer"],["class","alert alert-danger",4,"ngIf"],[1,"form-actions"],["type","button","routerLink","/admin/proyectos",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"font-semibold","text-sm"],["class","text-red-600",4,"ngIf"],[1,"flex","gap-2"],["type","button","class","btn btn-sm btn-ghost text-xs",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-error text-xs text-white",3,"click",4,"ngIf"],[1,"grid","grid-cols-3","gap-3"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-3","text-xs","text-gray-600","space-y-1"],[1,"text-red-600"],["type","button",1,"btn","btn-sm","btn-ghost","text-xs",3,"click"],["type","button",1,"btn","btn-sm","btn-error","text-xs","text-white",3,"click"],[1,"relative","group"],["class","absolute top-2 left-2 z-10",4,"ngIf"],["alt","Preview",1,"w-full","h-24","object-cover","rounded","border","cursor-pointer","transition-all",3,"click","src"],["class","absolute top-1 right-1 bg-blue-500 text-white text-xs px-2 py-1 rounded font-semibold",4,"ngIf"],["class","absolute bottom-1 left-1 bg-green-500 text-white text-xs px-2 py-1 rounded",4,"ngIf"],["type","button","class","absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","z-10"],["type","checkbox",1,"checkbox","checkbox-sm","bg-white",3,"change","checked"],[1,"absolute","top-1","right-1","bg-blue-500","text-white","text-xs","px-2","py-1","rounded","font-semibold"],[1,"absolute","bottom-1","left-1","bg-green-500","text-white","text-xs","px-2","py-1","rounded"],["type","button",1,"absolute","top-1","right-1","bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","hover:bg-red-600","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"mt-3","p-3","bg-blue-50","rounded","text-sm","space-y-1"],[1,"text-green-700"],[1,"alert","alert-danger"]],template:function(e,a){e&1&&(i(0,"div",0),_(1,"app-back-button"),i(2,"header",1)(3,"h1"),r(4,"Crear Nuevo Proyecto"),n(),i(5,"p",2),r(6," Completa el formulario para agregar un nuevo proyecto a la plataforma. "),n()(),i(7,"div",3)(8,"form",4),g("ngSubmit",function(){return a.onSubmit()}),i(9,"div",5)(10,"div",6)(11,"div",7)(12,"label",8),r(13,"Nombre del Proyecto"),n(),_(14,"input",9),n(),i(15,"div",7)(16,"label",10),r(17,"Descripci\xF3n"),n(),_(18,"textarea",11),n(),i(19,"div",7)(20,"label",12),r(21,"Cliente"),n(),_(22,"input",13),n(),i(23,"div",14)(24,"div",15)(25,"div",7)(26,"label",16),r(27,"Estado"),n(),i(28,"select",17)(29,"option",18),r(30,"Activo"),n(),i(31,"option",19),r(32,"Inactivo"),n(),i(33,"option",20),r(34,"Completado"),n()()()(),i(35,"div",15)(36,"div",7)(37,"label",21),r(38,"Presupuesto"),n(),_(39,"input",22),n()()(),i(40,"div",23)(41,"div",24)(42,"label",25)(43,"span",26),r(44,"Fecha de Inicio"),n()(),_(45,"input",27),n(),i(46,"div",24)(47,"label",25)(48,"span",26),r(49,"Fecha de Fin"),n()(),_(50,"input",28),n()(),i(51,"div",24)(52,"label",25)(53,"span",29),r(54,"Im\xE1genes del Proyecto"),n()(),p(55,je,27,6,"div",30),i(56,"input",31),g("change",function(m){return a.onFileSelected(m)}),n(),i(57,"span",32),r(58," Puedes seleccionar m\xFAltiples im\xE1genes. La primera ser\xE1 la principal. Formatos: JPG, PNG, GIF. M\xE1x. 5MB por imagen. "),n(),p(59,Be,3,2,"div",33),n()(),i(60,"div",34),p(61,Re,2,1,"div",35),i(62,"div",36)(63,"button",37),r(64," Cancelar "),n(),i(65,"button",38),r(66),n()()()()()()()),e&2&&(l(8),s("formGroup",a.proyectoForm),l(47),s("ngIf",a.imagenesPreviews.length>0),l(4),s("ngIf",a.imagenesNuevas.length>0),l(2),s("ngIf",a.error),l(4),s("disabled",a.isSubmitting||a.proyectoForm.invalid),l(),u(" ",a.isSubmitting?"Guardando...":"Guardar Proyecto"," "))},dependencies:[y,k,S,V,H,K,Q,G,U,Y,q,$,J,W,O,N,Z],styles:[".form-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--color-surface);border-radius:8px;box-shadow:0 4px 12px #0000000d;max-width:800px;margin:0 auto}.card[_ngcontent-%COMP%]{border:none;box-shadow:none;border-radius:8px}.card-body[_ngcontent-%COMP%]{padding:30px}.card-footer[_ngcontent-%COMP%]{background-color:transparent;border-top:1px solid var(--color-border);padding:20px 30px;display:flex;justify-content:flex-end;gap:10px;border-radius:0 0 8px 8px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:6px;padding:10px 15px;font-size:1rem;transition:border-color .2s ease,box-shadow .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);box-shadow:0 0 0 .2rem rgba(var(--color-primary-rgb),.25);outline:none}label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:8px;display:block}.btn[_ngcontent-%COMP%]{border-radius:6px;padding:10px 20px;font-weight:500}[_nghost-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);border-color:var(--color-primary);color:#fff}[_nghost-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0c3b61;border-color:#0c3b61}.btn-secondary[_ngcontent-%COMP%]{background-color:#e0e0e0;border-color:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:darken(#e0e0e0,5%);border-color:darken(#e0e0e0,5%)}.section-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--color-primary);margin-bottom:10px}.section-header[_ngcontent-%COMP%]   p.muted[_ngcontent-%COMP%]{font-size:1.1rem}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.flex[_ngcontent-%COMP%]{display:flex}.justify-between[_ngcontent-%COMP%]{justify-content:space-between}.items-center[_ngcontent-%COMP%]{align-items:center}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-3[_ngcontent-%COMP%]{gap:.75rem}.gap-4[_ngcontent-%COMP%]{gap:1rem}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute}.top-1[_ngcontent-%COMP%]{top:.25rem}.top-2[_ngcontent-%COMP%]{top:.5rem}.right-1[_ngcontent-%COMP%]{right:.25rem}.left-1[_ngcontent-%COMP%]{left:.25rem}.left-2[_ngcontent-%COMP%]{left:.5rem}.bottom-1[_ngcontent-%COMP%]{bottom:.25rem}.z-10[_ngcontent-%COMP%]{z-index:10}.w-full[_ngcontent-%COMP%]{width:100%}.h-24[_ngcontent-%COMP%]{height:6rem}.w-6[_ngcontent-%COMP%]{width:1.5rem}.h-6[_ngcontent-%COMP%]{height:1.5rem}.border[_ngcontent-%COMP%]{border-width:1px}.border-2[_ngcontent-%COMP%]{border-width:2px}.border-4[_ngcontent-%COMP%]{border-width:4px}.border-blue-500[_ngcontent-%COMP%]{border-color:#3b82f6}.border-green-500[_ngcontent-%COMP%]{border-color:#10b981}.border-red-500[_ngcontent-%COMP%]{border-color:#ef4444}.border-gray-300[_ngcontent-%COMP%]{border-color:#d1d5db}.rounded[_ngcontent-%COMP%]{border-radius:.25rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-blue-500[_ngcontent-%COMP%]{background-color:#3b82f6}.bg-green-500[_ngcontent-%COMP%]{background-color:#10b981}.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444}.bg-blue-50[_ngcontent-%COMP%]{background-color:#eff6ff}.hover\\:bg-red-600[_ngcontent-%COMP%]:hover{background-color:#dc2626}.opacity-0[_ngcontent-%COMP%]{opacity:0}.opacity-70[_ngcontent-%COMP%]{opacity:.7}.group[_ngcontent-%COMP%]:hover   .group-hover\\:opacity-100[_ngcontent-%COMP%]{opacity:1}.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity[_ngcontent-%COMP%]{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.text-white[_ngcontent-%COMP%]{color:#fff}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.text-green-700[_ngcontent-%COMP%]{color:#15803d}.text-gray-600[_ngcontent-%COMP%]{color:#4b5563}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.p-3[_ngcontent-%COMP%]{padding:.75rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.space-y-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.object-cover[_ngcontent-%COMP%]{object-fit:cover}.checkbox[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.checkbox-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.file-input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.375rem;width:100%}.file-input-bordered[_ngcontent-%COMP%]{border:1px solid var(--color-border)}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}.btn-ghost[_ngcontent-%COMP%]{background-color:transparent;border:1px solid transparent}.btn-ghost[_ngcontent-%COMP%]:hover{background-color:#0000000d}.btn-error[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;border:none}.btn-error[_ngcontent-%COMP%]:hover{background-color:#dc2626}.label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.label-text[_ngcontent-%COMP%]{font-weight:600;color:#374151}.input[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:6px;padding:10px 15px;font-size:1rem}.input-bordered[_ngcontent-%COMP%]{border-color:var(--color-border)}.text-base-content\\/60[_ngcontent-%COMP%]{color:#0009}@media (max-width: 768px){.admin-section[_ngcontent-%COMP%]{padding:20px 10px}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-body[_ngcontent-%COMP%]{padding:20px}.card-footer[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.btn[_ngcontent-%COMP%]{width:100%}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.section-header[_ngcontent-%COMP%]   p.muted[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Ge(o,t){o&1&&(i(0,"span"),r(1,"El nombre es requerido"),n())}function qe(o,t){o&1&&(i(0,"span"),r(1,"El nombre debe tener al menos 3 caracteres"),n())}function $e(o,t){if(o&1&&(i(0,"div",28),p(1,Ge,2,0,"span",29)(2,qe,2,0,"span",29),n()),o&2){let e,a,c=d();l(),s("ngIf",(e=c.proyectoForm.get("nombre"))==null||e.errors==null?null:e.errors.required),l(),s("ngIf",(a=c.proyectoForm.get("nombre"))==null||a.errors==null?null:a.errors.minlength)}}function He(o,t){o&1&&(i(0,"div",28),r(1," La descripci\xF3n es requerida "),n())}function Ue(o,t){if(o&1&&(i(0,"span",40),r(1),n()),o&2){let e=d(2);l(),u(" - ",e.getImagenesSeleccionadas()," seleccionada(s) ")}}function Je(o,t){if(o&1){let e=P();i(0,"button",41),g("click",function(){b(e);let c=d(2);return x(c.toggleSeleccionarTodas(!0))}),r(1," Seleccionar todas "),n()}}function We(o,t){if(o&1){let e=P();i(0,"button",41),g("click",function(){b(e);let c=d(2);return x(c.toggleSeleccionarTodas(!1))}),r(1," Deseleccionar todas "),n()}}function Ye(o,t){if(o&1){let e=P();i(0,"button",42),g("click",function(){b(e);let c=d(2);return x(c.eliminarSeleccionadas())}),r(1),n()}if(o&2){let e=d(2);l(),u(" \u{1F5D1}\uFE0F Eliminar ",e.getImagenesSeleccionadas()," ")}}function Ke(o,t){if(o&1){let e=P();i(0,"div",49)(1,"input",50),g("change",function(){b(e);let c=d().index,m=d(2);return x(m.toggleSeleccion(c))}),n()()}if(o&2){let e=d().$implicit;l(),s("checked",e.seleccionada)}}function Qe(o,t){o&1&&(i(0,"span",51),r(1," \u2B50 Principal "),n())}function Xe(o,t){o&1&&(i(0,"span",52),r(1," Nueva "),n())}function Ze(o,t){if(o&1){let e=P();i(0,"button",53),g("click",function(){b(e);let c=d().index,m=d(2);return x(m.marcarParaEliminar(c))}),r(1," \u2715 "),n()}}function et(o,t){if(o&1){let e=P();i(0,"div",43),p(1,Ke,2,1,"div",44),i(2,"img",45),g("click",function(){let c=b(e),m=c.$implicit,f=c.index,h=d(2);return x(!m.seleccionada&&h.establecerComoPrincipal(f))}),n(),p(3,Qe,2,0,"span",46)(4,Xe,2,0,"span",47)(5,Ze,2,0,"button",48),n()}if(o&2){let e=t.$implicit;l(),s("ngIf",!e.isPrincipal),l(),E("border-blue-500",e.isPrincipal)("border-4",e.isPrincipal)("border-green-500",e.isNew&&!e.isPrincipal)("border-2",e.isNew&&!e.isPrincipal)("border-red-500",e.seleccionada)("border-2",e.seleccionada)("opacity-70",e.seleccionada)("border-gray-300",!e.isNew&&!e.isPrincipal&&!e.seleccionada),s("src",e.url,I),l(),s("ngIf",e.isPrincipal),l(),s("ngIf",e.isNew&&!e.isPrincipal),l(),s("ngIf",!e.isPrincipal)}}function tt(o,t){if(o&1&&(i(0,"div",30)(1,"div",31)(2,"h3",32),r(3),p(4,Ue,2,1,"span",33),n(),i(5,"div",34),p(6,Je,2,0,"button",35)(7,We,2,0,"button",35)(8,Ye,2,1,"button",36),n()(),i(9,"div",37),p(10,et,6,21,"div",38),n(),i(11,"div",39)(12,"p"),r(13,"\u{1F4A1} "),i(14,"strong"),r(15,"Haz clic"),n(),r(16," en una imagen para establecerla como principal"),n(),i(17,"p"),r(18,"\u2611\uFE0F "),i(19,"strong"),r(20,"Marca el checkbox"),n(),r(21," para seleccionar im\xE1genes a eliminar"),n(),i(22,"p"),r(23,"\u2B50 La imagen principal "),i(24,"strong"),r(25,"no puede ser eliminada"),n(),r(26," (selecciona otra primero)"),n()()()),o&2){let e=d();l(3),u(" Im\xE1genes (",e.imagenesPreviews.length,") "),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(2),s("ngIf",e.imagenesPreviews.length>1),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(),s("ngIf",e.getImagenesSeleccionadas()>0),l(2),s("ngForOf",e.imagenesPreviews)}}function nt(o,t){if(o&1&&(i(0,"p",57),r(1),n()),o&2){let e=d(2);l(),B(" \u2713 ",e.imagenesNuevas.length," imagen(es) nueva(s) - ",e.getTotalFileSize()," ")}}function it(o,t){if(o&1&&(i(0,"p",58),r(1),n()),o&2){let e=d(2);l(),u(" \u2717 ",e.imagenesAEliminar.length," imagen(es) se eliminar\xE1(n) al guardar ")}}function ot(o,t){if(o&1&&(i(0,"div",54),p(1,nt,2,2,"p",55)(2,it,2,1,"p",56),n()),o&2){let e=d();l(),s("ngIf",e.imagenesNuevas.length>0),l(),s("ngIf",e.imagenesAEliminar.length>0)}}function rt(o,t){if(o&1&&(i(0,"div",59),r(1),n()),o&2){let e=d();l(),u(" ",e.error," ")}}var A=class o{constructor(t,e,a,c){this.fb=t;this.route=e;this.router=a;this.api=c;this.proyectoForm=this.fb.group({nombre:["",[v.required,v.minLength(3)]],descripcion:["",v.required],estado:["activo",v.required],cliente:["",v.required],presupuesto:[null,[v.min(0)]],fecha_inicio:[null],fecha_fin:[null]})}proyectoForm;isSubmitting=!1;error=null;proyectoId;imagenesNuevas=[];imagenesAEliminar=[];imagenesPreviews=[];indicePrincipal=0;ngOnInit(){this.proyectoId=Number(this.route.snapshot.paramMap.get("id")),this.cargarProyecto()}cargarProyecto(){this.api.getProyecto(this.proyectoId).subscribe({next:t=>{console.log("\u{1F50D} Proyecto recibido:",t);let e=t.fecha_inicio?new Date(t.fecha_inicio).toISOString().split("T")[0]:null,a=t.fecha_fin?new Date(t.fecha_fin).toISOString().split("T")[0]:null;this.proyectoForm.patchValue({nombre:t.nombre,descripcion:t.descripcion,estado:t.estado||"activo",cliente:t.cliente,presupuesto:t.presupuesto??null,fecha_inicio:e,fecha_fin:a});let c=t.imagen_urls||[];console.log("\u2705 Im\xE1genes existentes:",c),this.indicePrincipal=0,this.imagenesPreviews=c.map((m,f)=>({url:m,isNew:!1,isPrincipal:f===0})),console.log("\u2705 Previews generados:",this.imagenesPreviews.length)},error:()=>{this.error="Error al cargar el proyecto"}})}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let a=Array.from(e.files),c=a.filter(f=>f.type.startsWith("image/"));if(c.length!==a.length){this.error="Algunos archivos no son im\xE1genes v\xE1lidas";return}let m=c.filter(f=>f.size<=5*1024*1024);if(m.length!==c.length){this.error="Algunas im\xE1genes superan el tama\xF1o m\xE1ximo de 5MB";return}this.imagenesNuevas.push(...m),m.forEach(f=>{let h=new FileReader;h.onload=M=>{this.imagenesPreviews.push({url:M.target?.result,isNew:!0,file:f,isPrincipal:!1})},h.readAsDataURL(f)}),this.error=null,e.value=""}}marcarParaEliminar(t){let e=this.imagenesPreviews[t];if(this.imagenesPreviews.length===1){this.error="No puedes eliminar la \xFAnica imagen del proyecto";return}if(e.isNew){let a=this.imagenesNuevas.findIndex(c=>c===e.file);a!==-1&&this.imagenesNuevas.splice(a,1),this.imagenesPreviews.splice(t,1)}else this.imagenesAEliminar.includes(e.url)||this.imagenesAEliminar.push(e.url),this.imagenesPreviews.splice(t,1);t===this.indicePrincipal?(this.indicePrincipal=0,this.imagenesPreviews.length>0&&(this.imagenesPreviews[0].isPrincipal=!0)):t<this.indicePrincipal&&this.indicePrincipal--}establecerComoPrincipal(t){this.imagenesPreviews.forEach(e=>e.isPrincipal=!1),this.imagenesPreviews[t].isPrincipal=!0,this.indicePrincipal=t,console.log("\u{1F4F8} Nueva imagen principal (\xEDndice):",this.indicePrincipal)}getTotalFileSize(){return(this.imagenesNuevas.reduce((a,c)=>a+c.size,0)/(1024*1024)).toFixed(2)+" MB"}toggleSeleccionarTodas(t){this.imagenesPreviews.forEach(e=>{e.isPrincipal||(e.seleccionada=t)})}getImagenesSeleccionadas(){return this.imagenesPreviews.filter(t=>t.seleccionada).length}eliminarSeleccionadas(){let t=this.imagenesPreviews.map((e,a)=>e.seleccionada?a:-1).filter(e=>e!==-1);if(t.length===this.imagenesPreviews.length){this.error="No puedes eliminar todas las im\xE1genes del proyecto.";return}for(let e=t.length-1;e>=0;e--)this.marcarParaEliminar(t[e])}toggleSeleccion(t){this.imagenesPreviews[t]&&!this.imagenesPreviews[t].isPrincipal&&(this.imagenesPreviews[t].seleccionada=!this.imagenesPreviews[t].seleccionada)}onSubmit(){if(this.proyectoForm.invalid){this.proyectoForm.markAllAsTouched();return}this.isSubmitting=!0,this.error=null;let t=this.proyectoForm.value,e={nombre:t.nombre,descripcion:t.descripcion,estado:t.estado||"activo",cliente:t.cliente,presupuesto:t.presupuesto??0,fecha_inicio:t.fecha_inicio||null,fecha_fin:t.fecha_fin||null,imagenes_a_eliminar:this.imagenesAEliminar,indice_imagen_principal:this.indicePrincipal},a=new FormData;a.append("data",JSON.stringify(e)),console.log("\u{1F4E4} Enviando nuevas im\xE1genes:",this.imagenesNuevas.length),this.imagenesNuevas.forEach((c,m)=>{console.log(`  ${m+1}. ${c.name} (${c.size} bytes)`),a.append("imagenes",c)}),console.log("\u{1F5D1}\uFE0F Im\xE1genes a eliminar:",this.imagenesAEliminar),console.log("\u{1F4F8} \xCDndice imagen principal:",this.indicePrincipal),console.log("\u{1F4CB} Datos del proyecto:",e),this.api.actualizarProyecto(this.proyectoId,a).subscribe({next:c=>{console.log("\u2705 Respuesta del servidor:",c),this.isSubmitting=!1,this.router.navigate(["/admin/proyectos"])},error:c=>{console.error("\u274C Error al actualizar el proyecto",c),this.error=c?.error?.error||"Error al actualizar el proyecto",this.isSubmitting=!1}})}static \u0275fac=function(e){return new(e||o)(C(X),C(ue),C(R),C(T))};static \u0275cmp=w({type:o,selectors:[["app-modificar-proyecto"]],decls:64,vars:14,consts:[[1,"container","mx-auto","p-4"],[1,"max-w-2xl","mx-auto"],[1,"text-2xl","font-bold","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","text","formControlName","nombre",1,"input","input-bordered","w-full"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["formControlName","descripcion",1,"textarea","textarea-bordered","h-24"],["type","text","formControlName","cliente",1,"input","input-bordered","w-full"],["formControlName","estado",1,"select","select-bordered","w-full"],["value","activo"],["value","inactivo"],["value","completado"],["type","number","formControlName","presupuesto","min","0",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-2","gap-4"],["type","date","formControlName","fecha_inicio",1,"input","input-bordered","w-full"],["type","date","formControlName","fecha_fin",1,"input","input-bordered","w-full"],[1,"label-text","font-semibold"],["class","mb-4",4,"ngIf"],["type","file","accept","image/*","multiple","",1,"file-input","file-input-bordered","w-full",3,"change"],[1,"text-xs","text-base-content/60","mt-1"],["class","mt-3 p-3 bg-blue-50 rounded text-sm space-y-1",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],[1,"flex","justify-end","space-x-2"],["type","button","routerLink","/admin/proyectos",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"font-semibold","text-sm"],["class","text-red-600",4,"ngIf"],[1,"flex","gap-2"],["type","button","class","btn btn-sm btn-ghost text-xs",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-error text-xs text-white",3,"click",4,"ngIf"],[1,"grid","grid-cols-3","gap-3"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-3","text-xs","text-gray-600","space-y-1"],[1,"text-red-600"],["type","button",1,"btn","btn-sm","btn-ghost","text-xs",3,"click"],["type","button",1,"btn","btn-sm","btn-error","text-xs","text-white",3,"click"],[1,"relative","group"],["class","absolute top-2 left-2 z-10",4,"ngIf"],["alt","Preview",1,"w-full","h-24","object-cover","rounded","border","cursor-pointer","transition-all",3,"click","src"],["class","absolute top-1 right-1 bg-blue-500 text-white text-xs px-2 py-1 rounded font-semibold",4,"ngIf"],["class","absolute bottom-1 left-1 bg-green-500 text-white text-xs px-2 py-1 rounded",4,"ngIf"],["type","button","class","absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","z-10"],["type","checkbox",1,"checkbox","checkbox-sm","bg-white",3,"change","checked"],[1,"absolute","top-1","right-1","bg-blue-500","text-white","text-xs","px-2","py-1","rounded","font-semibold"],[1,"absolute","bottom-1","left-1","bg-green-500","text-white","text-xs","px-2","py-1","rounded"],["type","button",1,"absolute","top-1","right-1","bg-red-500","text-white","rounded-full","w-6","h-6","flex","items-center","justify-center","hover:bg-red-600","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"mt-3","p-3","bg-blue-50","rounded","text-sm","space-y-1"],["class","text-green-700",4,"ngIf"],["class","text-red-700",4,"ngIf"],[1,"text-green-700"],[1,"text-red-700"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"]],template:function(e,a){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Modificar Proyecto"),n(),i(4,"form",3),g("ngSubmit",function(){return a.onSubmit()}),i(5,"div",4)(6,"label",5)(7,"span",6),r(8,"Nombre del Proyecto"),n()(),_(9,"input",7),p(10,$e,3,2,"div",8),n(),i(11,"div",4)(12,"label",5)(13,"span",6),r(14,"Descripci\xF3n"),n()(),_(15,"textarea",9),p(16,He,2,0,"div",8),n(),i(17,"div",4)(18,"label",5)(19,"span",6),r(20,"Cliente"),n()(),_(21,"input",10),n(),i(22,"div",4)(23,"label",5)(24,"span",6),r(25,"Estado"),n()(),i(26,"select",11)(27,"option",12),r(28,"Activo"),n(),i(29,"option",13),r(30,"Inactivo"),n(),i(31,"option",14),r(32,"Completado"),n()()(),i(33,"div",4)(34,"label",5)(35,"span",6),r(36,"Presupuesto"),n()(),_(37,"input",15),n(),i(38,"div",16)(39,"div",4)(40,"label",5)(41,"span",6),r(42,"Fecha de Inicio"),n()(),_(43,"input",17),n(),i(44,"div",4)(45,"label",5)(46,"span",6),r(47,"Fecha de Fin"),n()(),_(48,"input",18),n()(),i(49,"div",4)(50,"label",5)(51,"span",19),r(52,"Im\xE1genes del Proyecto"),n()(),p(53,tt,27,6,"div",20),i(54,"input",21),g("change",function(m){return a.onFileSelected(m)}),n(),i(55,"span",22),r(56," Puedes agregar m\xE1s im\xE1genes. Formatos: JPG, PNG, GIF. M\xE1x. 5MB por imagen. "),n(),p(57,ot,3,2,"div",23),n(),p(58,rt,2,1,"div",24),i(59,"div",25)(60,"button",26),r(61," Cancelar "),n(),i(62,"button",27),r(63),n()()()()()),e&2){let c,m,f,h,M;l(4),s("formGroup",a.proyectoForm),l(5),E("input-error",((c=a.proyectoForm.get("nombre"))==null?null:c.touched)&&((c=a.proyectoForm.get("nombre"))==null?null:c.invalid)),l(),s("ngIf",((m=a.proyectoForm.get("nombre"))==null?null:m.touched)&&((m=a.proyectoForm.get("nombre"))==null?null:m.invalid)),l(5),E("textarea-error",((f=a.proyectoForm.get("descripcion"))==null?null:f.touched)&&((f=a.proyectoForm.get("descripcion"))==null?null:f.invalid)),l(),s("ngIf",((h=a.proyectoForm.get("descripcion"))==null?null:h.touched)&&((h=a.proyectoForm.get("descripcion"))==null?null:h.invalid)),l(5),E("input-error",((M=a.proyectoForm.get("cliente"))==null?null:M.touched)&&((M=a.proyectoForm.get("cliente"))==null?null:M.invalid)),l(32),s("ngIf",a.imagenesPreviews.length>0),l(4),s("ngIf",a.imagenesNuevas.length>0||a.imagenesAEliminar.length>0),l(),s("ngIf",a.error),l(4),s("disabled",a.isSubmitting||a.proyectoForm.invalid),l(),u(" ",a.isSubmitting?"Actualizando...":"Actualizar Proyecto"," ")}},dependencies:[y,k,S,V,H,K,Q,G,U,Y,q,$,fe,J,W,O,N],styles:[".container[_ngcontent-%COMP%]{max-width:1200px}.max-w-2xl[_ngcontent-%COMP%]{max-width:42rem}.mx-auto[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.p-4[_ngcontent-%COMP%]{padding:1rem}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{display:flex;flex-direction:column}.label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.label-text[_ngcontent-%COMP%]{font-weight:600;color:#374151}.input[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%], .select[_ngcontent-%COMP%]{border:2px solid #e5e7eb;border-radius:8px;padding:.75rem;font-size:1rem;transition:all .3s ease;background-color:#fff}.input[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus, .select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0f4c81;box-shadow:0 0 0 3px #0f4c811a}.input-bordered[_ngcontent-%COMP%], .textarea-bordered[_ngcontent-%COMP%], .select-bordered[_ngcontent-%COMP%]{border-color:#e5e7eb}.input-error[_ngcontent-%COMP%], .textarea-error[_ngcontent-%COMP%]{border-color:#ef4444;background-color:#fef2f2}.text-red-500[_ngcontent-%COMP%]{color:#ef4444}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.75rem 1.5rem;font-weight:600;border-radius:8px;border:none;cursor:pointer;transition:all .3s ease;text-decoration:none}[_nghost-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f4c81,#1a6ca8);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #0f4c814d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-ghost[_ngcontent-%COMP%]{background-color:transparent;color:#6b7280;border:2px solid #e5e7eb}.btn-ghost[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#d1d5db}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-3[_ngcontent-%COMP%]{gap:.75rem}.gap-4[_ngcontent-%COMP%]{gap:1rem}.flex[_ngcontent-%COMP%]{display:flex}.justify-between[_ngcontent-%COMP%]{justify-content:space-between}.justify-end[_ngcontent-%COMP%]{justify-content:flex-end}.items-center[_ngcontent-%COMP%]{align-items:center}.space-x-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute}.top-1[_ngcontent-%COMP%]{top:.25rem}.top-2[_ngcontent-%COMP%]{top:.5rem}.right-1[_ngcontent-%COMP%]{right:.25rem}.left-1[_ngcontent-%COMP%]{left:.25rem}.left-2[_ngcontent-%COMP%]{left:.5rem}.bottom-1[_ngcontent-%COMP%]{bottom:.25rem}.z-10[_ngcontent-%COMP%]{z-index:10}.w-full[_ngcontent-%COMP%]{width:100%}.w-6[_ngcontent-%COMP%]{width:1.5rem}.h-6[_ngcontent-%COMP%]{height:1.5rem}.h-24[_ngcontent-%COMP%]{height:6rem}.border[_ngcontent-%COMP%]{border-width:1px}.border-2[_ngcontent-%COMP%]{border-width:2px}.border-4[_ngcontent-%COMP%]{border-width:4px}.border-blue-500[_ngcontent-%COMP%]{border-color:#3b82f6}.border-green-500[_ngcontent-%COMP%]{border-color:#10b981}.border-red-500[_ngcontent-%COMP%]{border-color:#ef4444}.border-gray-300[_ngcontent-%COMP%]{border-color:#d1d5db}.border-red-400[_ngcontent-%COMP%]{border-color:#f87171}.rounded[_ngcontent-%COMP%]{border-radius:.25rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-blue-500[_ngcontent-%COMP%]{background-color:#3b82f6}.bg-green-500[_ngcontent-%COMP%]{background-color:#10b981}.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444}.bg-blue-50[_ngcontent-%COMP%]{background-color:#eff6ff}.bg-red-100[_ngcontent-%COMP%]{background-color:#fee2e2}.hover\\:bg-red-600[_ngcontent-%COMP%]:hover{background-color:#dc2626}.opacity-0[_ngcontent-%COMP%]{opacity:0}.opacity-70[_ngcontent-%COMP%]{opacity:.7}.group[_ngcontent-%COMP%]:hover   .group-hover\\:opacity-100[_ngcontent-%COMP%]{opacity:1}.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity[_ngcontent-%COMP%]{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.text-white[_ngcontent-%COMP%]{color:#fff}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.text-red-700[_ngcontent-%COMP%]{color:#b91c1c}.text-green-700[_ngcontent-%COMP%]{color:#15803d}.text-gray-600[_ngcontent-%COMP%]{color:#4b5563}.text-base-content\\/60[_ngcontent-%COMP%]{color:#0009}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.p-3[_ngcontent-%COMP%]{padding:.75rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.space-y-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.object-cover[_ngcontent-%COMP%]{object-fit:cover}.checkbox[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;cursor:pointer}.checkbox-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.file-input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.375rem;width:100%;cursor:pointer}.file-input-bordered[_ngcontent-%COMP%]{border:1px solid #e5e7eb}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}.btn-error[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;border:none}.btn-error[_ngcontent-%COMP%]:hover{background-color:#dc2626}@media (max-width: 768px){.p-4[_ngcontent-%COMP%]{padding:.5rem}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.flex.justify-end.space-x-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.text-2xl[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 480px){.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var xe=[{path:"",component:D},{path:"nuevo",component:z},{path:"editar/:id",component:A}];var Pe=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=ce({type:o});static \u0275inj=re({imports:[y,V,O.forChild(xe),D,z,A,O]})};export{Pe as GestionProyectosModule};
