import{c as b}from"./chunk-XOJ3ZZYT.js";import"./chunk-FBWEELH3.js";import{b as y,c as d,d as L,e as S,f as O,h as P,i as E,n as I,p as w}from"./chunk-5QYDUWHY.js";import{a as M}from"./chunk-PNSEB424.js";import"./chunk-FY6VRBN4.js";import{$a as s,Fb as m,Gb as C,Hb as x,Ma as r,Ra as g,Wa as f,gb as p,mc as F,ob as i,pb as o,qb as _,rc as h,vb as v,wb as c}from"./chunk-CTZ6MGBM.js";function N(e,l){e&1&&(i(0,"small"),m(1,"El email es requerido."),o())}function k(e,l){e&1&&(i(0,"small"),m(1,"Email inv\xE1lido."),o())}function q(e,l){if(e&1&&(i(0,"div",9),s(1,N,2,0,"small",10)(2,k,2,0,"small",10),o()),e&2){let n,t,a=c();r(),p("ngIf",(n=a.loginForm.get("email"))==null||n.errors==null?null:n.errors.required),r(),p("ngIf",(t=a.loginForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function A(e,l){e&1&&(i(0,"small"),m(1,"La contrase\xF1a es requerida."),o())}function G(e,l){e&1&&(i(0,"small"),m(1,"La contrase\xF1a es muy corta."),o())}function D(e,l){if(e&1&&(i(0,"div",9),s(1,A,2,0,"small",10)(2,G,2,0,"small",10),o()),e&2){let n,t,a=c();r(),p("ngIf",(n=a.loginForm.get("password"))==null||n.errors==null?null:n.errors.required),r(),p("ngIf",(t=a.loginForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function j(e,l){if(e&1&&(i(0,"p",9),m(1),o()),e&2){let n=c();r(),C(n.errorMessage)}}var T=class e{constructor(l,n,t){this.fb=l;this.api=n;this.router=t;this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}loginForm;isLoading=!1;errorMessage=null;submit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage=null;let l=this.loginForm.value;this.api.login(l).subscribe({next:n=>{this.api.setToken(n.token),this.isLoading=!1,this.router.navigate(["/admin/panel"])},error:n=>{this.isLoading=!1,this.errorMessage="Credenciales inv\xE1lidas. Intenta nuevamente."}})}static \u0275fac=function(n){return new(n||e)(g(I),g(M),g(b))};static \u0275cmp=f({type:e,selectors:[["app-login-form"]],decls:19,vars:6,consts:[[1,"login-panel","container"],[1,"card"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","tu@correo.com"],["class","error",4,"ngIf"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"help-links"],["routerLink","/recuperar-password"],[1,"error"],[4,"ngIf"]],template:function(n,t){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),m(3,"Iniciar sesi\xF3n"),o(),i(4,"form",2),v("ngSubmit",function(){return t.submit()}),i(5,"label"),m(6," Email "),_(7,"input",3),o(),s(8,q,3,2,"div",4),i(9,"label"),m(10," Contrase\xF1a "),_(11,"input",5),o(),s(12,D,3,2,"div",4),i(13,"button",6),m(14),o()(),i(15,"p",7)(16,"a",8),m(17,"\xBFOlvidaste tu contrase\xF1a?"),o()(),s(18,j,2,1,"p",4),o()()),n&2){let a,u;r(4),p("formGroup",t.loginForm),r(4),p("ngIf",((a=t.loginForm.get("email"))==null?null:a.touched)&&((a=t.loginForm.get("email"))==null?null:a.invalid)),r(4),p("ngIf",((u=t.loginForm.get("password"))==null?null:u.touched)&&((u=t.loginForm.get("password"))==null?null:u.invalid)),r(),p("disabled",t.isLoading),r(),x(" ",t.isLoading?"Entrando...":"Entrar"," "),r(4),p("ngIf",t.errorMessage)}},dependencies:[h,F,w,O,y,L,S,P,E],styles:[".login-panel[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 12px}.login-panel[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:var(--color-surface);padding:28px;border-radius:12px;box-shadow:0 12px 40px #0206170f;width:100%;max-width:420px}.login-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--color-primary)}.login-panel[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin:12px 0 6px;color:#333}.login-panel[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--color-border)}.login-panel[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#d23}.login-panel[_ngcontent-%COMP%]   .help-links[_ngcontent-%COMP%]{margin-top:12px}.login-panel[_ngcontent-%COMP%]   .help-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.login-panel[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-top:12px}"]})};export{T as LoginFormComponent};
