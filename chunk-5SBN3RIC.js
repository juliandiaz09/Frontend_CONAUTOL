import{a as z}from"./chunk-SN34MVIC.js";import{a as D,d as L,g as T}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Db as y,Eb as c,Fb as u,Gb as C,Ha as b,Ia as O,Ka as I,La as a,Qa as f,Tb as w,Va as M,Z as p,_ as h,_a as d,fb as s,hb as P,lc as k,mc as S,nb as n,ob as o,pb as x,tb as _,tc as E,ub as m,vb as g}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";function F(i,e){i&1&&(n(0,"div",8)(1,"div",9)(2,"p"),c(3,"Cargando servicio..."),o()()())}function j(i,e){i&1&&(n(0,"div",8)(1,"div",9)(2,"p"),c(3,"Cargando servicio..."),o()()())}function A(i,e){if(i&1&&(n(0,"span",20),c(1),o()),i&2){let t=g(2);a(),C(" ",t.servicio.categoria," ")}}function R(i,e){if(i&1){let t=_();n(0,"div",24)(1,"img",25),m("click",function(){p(t);let l=g(3);return h(l.openLightbox(l.selectedImage))}),o()()}if(i&2){let t=g(3);a(),s("src",t.selectedImage,b)("alt",t.servicio==null?null:t.servicio.nombre)}}function B(i,e){if(i&1){let t=_();n(0,"button",28),m("click",function(){let l=p(t).$implicit,v=g(4);return h(v.selectImage(l))}),x(1,"img",29),o()}if(i&2){let t=e.$implicit,r=g(4);P("is-active",t===r.selectedImage),a(),s("src",t,b)("alt",r.servicio==null?null:r.servicio.nombre)}}function N(i,e){if(i&1&&(n(0,"div",26),d(1,B,2,4,"button",27),o()),i&2){let t=g(3);a(),s("ngForOf",t.allImages)}}function U(i,e){if(i&1&&(n(0,"div",21),d(1,R,2,2,"div",22)(2,N,2,1,"div",23),o()),i&2){let t=g(2);a(),s("ngIf",t.selectedImage),a(),s("ngIf",t.allImages.length>1)}}function H(i,e){if(i&1){let t=_();n(0,"button",35),m("click",function(){p(t);let l=g(3);return h(l.prevImage())}),c(1," \u276E "),o()}}function Y(i,e){if(i&1){let t=_();n(0,"button",36),m("click",function(){p(t);let l=g(3);return h(l.nextImage())}),c(1," \u276F "),o()}}function K(i,e){if(i&1){let t=_();n(0,"div",30),m("click",function(){p(t);let l=g(2);return h(l.closeLightbox())}),n(1,"div",31),m("click",function(l){return p(t),h(l.stopPropagation())}),n(2,"button",32),m("click",function(){p(t);let l=g(2);return h(l.closeLightbox())}),c(3," \xD7 "),o(),d(4,H,2,0,"button",33)(5,Y,2,0,"button",34),x(6,"img",29),o()()}if(i&2){let t=g(2);a(4),s("ngIf",t.allImages.length>1),a(),s("ngIf",t.allImages.length>1),a(),s("src",t.lightboxImage||t.selectedImage,b)("alt",t.servicio==null?null:t.servicio.nombre)}}function $(i,e){if(i&1&&(n(0,"li")(1,"span",39),c(2,"check_circle_outline"),o(),n(3,"span"),c(4),o()()),i&2){let t=e.$implicit;a(4),u(t)}}function W(i,e){if(i&1&&(n(0,"div",15)(1,"h2"),c(2,"Caracter\xEDsticas"),o(),n(3,"ul",37),d(4,$,5,1,"li",38),o()()),i&2){let t=g(2);a(4),s("ngForOf",t.servicio.caracteristicas)}}function q(i,e){if(i&1&&(n(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1",11),c(4),o(),d(5,A,2,1,"span",12),o(),d(6,U,3,2,"div",13)(7,K,7,4,"div",14),n(8,"div",15)(9,"h2"),c(10,"Descripci\xF3n"),o(),n(11,"p",16),c(12),o()(),d(13,W,5,1,"div",17),n(14,"div",18)(15,"a",19),c(16,"\u2190 Volver a Servicios"),o()()()()),i&2){let t=g();a(4),u(t.servicio.nombre),a(),s("ngIf",t.servicio.categoria),a(),s("ngIf",t.allImages==null?null:t.allImages.length),a(),s("ngIf",t.lightboxOpen),a(5),C(" ",t.servicio.descripcion," "),a(),s("ngIf",t.servicio.caracteristicas==null?null:t.servicio.caracteristicas.length)}}function G(i,e){i&1&&(n(0,"div",8)(1,"div",9)(2,"p"),c(3,"Servicio no encontrado."),o(),n(4,"a",19),c(5,"Volver a Servicios"),o()()())}var V=class i{constructor(e,t){this.route=e;this.apiService=t}servicio=null;serviciosFiltrados=[];filtroActual="";isLoading=!0;allImages=[];selectedImage=null;lightboxOpen=!1;lightboxImage=null;currentImageIndex=0;ngOnInit(){this.initializeChatbot();let e=this.route.snapshot.paramMap.get("id");if(!e){console.error("No se recibi\xF3 ID de servicio en la ruta"),this.isLoading=!1;return}let t=Number(e);this.apiService.getServicio(t).subscribe({next:r=>{this.servicio=r,this.serviciosFiltrados=r.caracteristicas??[],this.buildImagesFromServicio(),this.isLoading=!1},error:r=>{console.error("Error al cargar servicio",r),this.isLoading=!1}})}aplicarFiltro(e){if(this.filtroActual=e,!this.servicio||!this.servicio.caracteristicas){this.serviciosFiltrados=[];return}this.serviciosFiltrados=this.servicio.caracteristicas.filter(t=>t.toLowerCase().includes(e.toLowerCase()))}buildImagesFromServicio(){if(!this.servicio)return;let e=[];this.servicio.imagen_urls?.length&&e.push(...this.servicio.imagen_urls),this.servicio.imagenUrl&&e.push(this.servicio.imagenUrl),this.servicio.imagen_url&&e.push(this.servicio.imagen_url),this.allImages=Array.from(new Set(e)),this.currentImageIndex=0,this.selectedImage=this.allImages[0]??null}selectImage(e){let t=this.allImages.indexOf(e);t!==-1&&(this.currentImageIndex=t,this.selectedImage=e)}openLightbox(e){if(this.allImages.length){if(e){let t=this.allImages.indexOf(e);t!==-1&&(this.currentImageIndex=t)}this.lightboxImage=this.allImages[this.currentImageIndex],this.lightboxOpen=!0}}closeLightbox(){this.lightboxOpen=!1,this.lightboxImage=null}nextImage(){this.allImages.length&&(this.currentImageIndex=(this.currentImageIndex+1)%this.allImages.length,this.updateSelectedFromIndex())}prevImage(){this.allImages.length&&(this.currentImageIndex=(this.currentImageIndex-1+this.allImages.length)%this.allImages.length,this.updateSelectedFromIndex())}updateSelectedFromIndex(){this.lightboxImage=this.allImages[this.currentImageIndex],this.selectedImage=this.lightboxImage}handleKeyboard(e){this.lightboxOpen&&(e.key==="Escape"&&this.closeLightbox(),e.key==="ArrowRight"&&this.nextImage(),e.key==="ArrowLeft"&&this.prevImage())}isChatbotVisible=!1;toggleChatbot(){this.isChatbotVisible=!this.isChatbotVisible,setTimeout(()=>{let e=document.getElementById("chatbot-container"),t=document.getElementById("chatbot-toggle");this.isChatbotVisible?(e?.classList.remove("chatbot-hidden"),e?.classList.add("chatbot-visible"),t?.classList.add("chatbot-active")):(e?.classList.remove("chatbot-visible"),e?.classList.add("chatbot-hidden"),t?.classList.remove("chatbot-active"))},10)}initializeChatbot(){setTimeout(()=>{let e=document.getElementById("chatbot-container"),t=document.getElementById("chatbot-toggle");e?.classList.add("chatbot-hidden"),t?.classList.remove("chatbot-active"),t?.addEventListener("click",()=>{this.toggleChatbot()})},100)}static \u0275fac=function(t){return new(t||i)(f(D),f(z))};static \u0275cmp=M({type:i,selectors:[["app-detalle-servicio"]],hostBindings:function(t,r){t&1&&m("keydown",function(v){return r.handleKeyboard(v)},!1,I)},decls:12,vars:4,consts:[["notFoundTpl",""],["class","detalle-servicio-page",4,"ngIf"],["class","detalle-servicio-page",4,"ngIf","ngIfElse"],["id","chatbot-toggle",1,"chatbot-toggle-hidden"],[1,"chatbot-icon"],[1,"close-icon"],["id","chatbot-container",1,"chatbot-hidden"],["src",O`https://page.botpenguin.com/690c1346ff158e42155339eb/690c1052cde802431fa13ff0`,"id","chatbot-frame","allow","microphone; camera"],[1,"detalle-servicio-page"],[1,"container"],[1,"detalle-header"],[1,"detalle-title"],["class","badge badge-categoria",4,"ngIf"],["class","detalle-galeria",4,"ngIf"],["class","lightbox-backdrop",3,"click",4,"ngIf"],[1,"detalle-section"],[1,"descripcion"],["class","detalle-section",4,"ngIf"],[1,"volver-container"],["routerLink","/servicios",1,"btn-primary"],[1,"badge","badge-categoria"],[1,"detalle-galeria"],["class","galeria-principal",4,"ngIf"],["class","galeria-thumbs",4,"ngIf"],[1,"galeria-principal"],[3,"click","src","alt"],[1,"galeria-thumbs"],["type","button","class","thumb-btn",3,"is-active","click",4,"ngFor","ngForOf"],["type","button",1,"thumb-btn",3,"click"],[3,"src","alt"],[1,"lightbox-backdrop",3,"click"],[1,"lightbox-content",3,"click"],["type","button",1,"lightbox-close",3,"click"],["type","button","class","lightbox-prev",3,"click",4,"ngIf"],["type","button","class","lightbox-next",3,"click",4,"ngIf"],["type","button",1,"lightbox-prev",3,"click"],["type","button",1,"lightbox-next",3,"click"],[1,"caracteristicas-list"],[4,"ngFor","ngForOf"],[1,"material-icons"]],template:function(t,r){if(t&1&&(d(0,F,4,0,"div",1)(1,j,4,0,"div",1)(2,q,17,6,"div",2)(3,G,6,0,"ng-template",null,0,w),n(5,"button",3)(6,"span",4),c(7,"\u{1F4AC}"),o(),n(8,"span",5),c(9,"\u2715"),o()(),n(10,"div",6),x(11,"iframe",7),o()),t&2){let l=y(4);s("ngIf",r.isLoading),a(),s("ngIf",r.isLoading),a(),s("ngIf",!r.isLoading&&r.servicio)("ngIfElse",l)}},dependencies:[E,k,S,T,L],styles:['[_nghost-%COMP%]{display:block;background-color:var(--color-bg);padding:40px 0}.container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 20px}.detalle-title[_ngcontent-%COMP%]{font-size:3rem;color:var(--color-primary);text-align:center;margin-bottom:30px;font-weight:700}.detalle-imagen[_ngcontent-%COMP%]{margin-bottom:30px;border-radius:12px;overflow:hidden;box-shadow:0 8px 20px #0000001a}.detalle-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.detalle-section[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:30px;border-radius:12px;box-shadow:0 4px 15px #00000012;margin-bottom:30px}.detalle-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--color-primary);font-weight:600;margin-bottom:20px;border-bottom:1px solid var(--color-border);padding-bottom:10px}.descripcion[_ngcontent-%COMP%]{font-size:1.1rem;color:#495057;line-height:1.6}.caracteristicas-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.caracteristicas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.1rem;color:#495057;padding:10px 0;border-bottom:1px dashed #e9ecef}.caracteristicas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.caracteristicas-list[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#28a745;margin-right:10px;font-size:1.3rem}.detalle-meta-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-bottom:40px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.5em .8em;font-size:.85em;font-weight:600;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;margin:0 5px}.detalle-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.detalle-title[_ngcontent-%COMP%]{font-size:clamp(2.4rem,4vw,3.2rem);color:var(--color-primary);font-weight:800;letter-spacing:.08em;text-transform:capitalize;margin:0 0 2.5rem;position:relative}.detalle-title[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;bottom:-12px;transform:translate(-50%);width:90px;height:4px;border-radius:999px;background:var(--color-primary);box-shadow:0 4px 12px #0000002e}.badge-categoria[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;margin-top:1.25rem;padding:.55em 1.3em;border-radius:999px;background:#0000000f;color:var(--color-primary);text-transform:uppercase;letter-spacing:.12em;font-size:.8rem;font-weight:700;border:1px solid rgba(0,0,0,.06);backdrop-filter:blur(6px);box-shadow:0 8px 20px #00000014}.badge-activo[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-inactivo[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.badge-completado[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.volver-container[_ngcontent-%COMP%]{text-align:center;margin-top:40px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:12px 28px;border-radius:50px;text-decoration:none;font-weight:600;transition:background-color .3s ease,transform .2s ease;display:inline-block}.btn-primary[_ngcontent-%COMP%]:hover{background-color:darken(var(--color-primary),10%);transform:scale(1.02)}.detalle-servicio-page[ng-reflect-ng-if=false][_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{text-align:center;padding:50px}.detalle-galeria[_ngcontent-%COMP%]{margin:2rem 0}.galeria-principal[_ngcontent-%COMP%]{width:100%;border-radius:12px;overflow:hidden;cursor:zoom-in;aspect-ratio:16 / 9;background:#f3f3f3;display:flex;align-items:center;justify-content:center}.galeria-principal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;display:block;object-fit:contain;transition:transform .3s ease}.galeria-principal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.galeria-thumbs[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:nowrap;gap:.75rem;margin-top:1rem;overflow-x:auto;width:100%;padding-bottom:.5rem}.galeria-thumbs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.galeria-thumbs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}.thumb-btn[_ngcontent-%COMP%]{border:none;padding:0;background:transparent;border-radius:8px;overflow:hidden;cursor:pointer;flex:0 0 auto;outline:none;transition:transform .2s ease,box-shadow .2s ease}.thumb-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;display:block;opacity:.5;transition:opacity .2s ease,transform .2s ease}.thumb-btn.is-active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;transform:translateY(-2px)}.thumb-btn.is-active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #007bff}.lightbox-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:999}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;align-items:center;justify-content:center}.lightbox-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%;display:block;object-fit:contain;border-radius:8px;background:#000}.lightbox-close[_ngcontent-%COMP%]{position:absolute;top:-2.5rem;right:0;border:none;background:transparent;color:#fff;font-size:2rem;cursor:pointer}.lightbox-prev[_ngcontent-%COMP%], .lightbox-next[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);border:none;background:#0009;color:#fff;font-size:2rem;width:2.5rem;height:2.5rem;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.lightbox-prev[_ngcontent-%COMP%]{left:-3rem}.lightbox-next[_ngcontent-%COMP%]{right:-3rem}@media (max-width: 768px){.lightbox-prev[_ngcontent-%COMP%]{left:.5rem}.lightbox-next[_ngcontent-%COMP%]{right:.5rem}}.badge-categoria[_ngcontent-%COMP%]:before{content:"\\2605";font-size:.9rem;opacity:.9}@media (max-width: 768px){.detalle-title[_ngcontent-%COMP%]{font-size:2.1rem;letter-spacing:.06em}.badge-categoria[_ngcontent-%COMP%]{font-size:.75rem;padding:.45em 1.1em}.detalle-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px}.detalle-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15px}.descripcion[_ngcontent-%COMP%], .caracteristicas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1rem}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px}}#chatbot-toggle[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:70px;height:70px;background:linear-gradient(135deg,var(--color-primary) 0%,#0a3a63 100%);border:none;border-radius:50%;box-shadow:0 5px 20px #0000004d;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10000;transition:all .3s ease;overflow:hidden}#chatbot-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 8px 25px #0006}.chatbot-icon[_ngcontent-%COMP%], .close-icon[_ngcontent-%COMP%]{font-size:28px;transition:all .3s ease;position:absolute}.close-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(.5)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-accent) 0%,#e55a2b 100%)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]   .chatbot-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(.5)}#chatbot-toggle.chatbot-active[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}#chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:110px;right:30px;width:380px;height:500px;z-index:9999;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px #0000004d;transition:all .3s ease}#chatbot-container.chatbot-hidden[_ngcontent-%COMP%]{opacity:0;transform:scale(0) translateY(20px);pointer-events:none}#chatbot-container.chatbot-visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1) translateY(0);pointer-events:all}#chatbot-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:none;background:#fff}@media (max-width: 600px){#chatbot-container[_ngcontent-%COMP%]{width:95%;height:70%;bottom:100px;right:2.5%;left:2.5%}#chatbot-toggle[_ngcontent-%COMP%]{bottom:20px;right:20px;width:60px;height:60px}.chatbot-icon[_ngcontent-%COMP%], .close-icon[_ngcontent-%COMP%]{font-size:24px}}@keyframes _ngcontent-%COMP%_pulse-chatbot{0%{box-shadow:0 0 #ffc107b3}70%{box-shadow:0 0 0 10px #ffc10700}to{box-shadow:0 0 #ffc10700}}#chatbot-toggle.has-notification[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-chatbot 2s infinite}.about-preview-section[_ngcontent-%COMP%], .servicios-section[_ngcontent-%COMP%], .proyectos-section[_ngcontent-%COMP%], .testimonios-section[_ngcontent-%COMP%]{background-color:var(--color-bg-dark);color:var(--color-text-light)}.about-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .about-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .servicios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .proyectos-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .testimonios-section[_ngcontent-%COMP%]{color:var(--color-text-light)!important}']})};export{V as DetalleServicioComponent};
