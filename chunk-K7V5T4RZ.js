import{b as L,c as d,d as P,e as S,g as O,j as E,k as I,p as w,r as T}from"./chunk-U6PYTPUR.js";import{a as y}from"./chunk-SN34MVIC.js";import{c as M,g as b}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Eb as p,Fb as C,Gb as x,La as r,Qa as u,Va as f,_a as s,fb as m,mc as F,nb as i,ob as o,pb as _,tc as h,ub as v,vb as c}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";function k(e,l){e&1&&(i(0,"small"),p(1,"El email es requerido."),o())}function q(e,l){e&1&&(i(0,"small"),p(1,"Email inv\xE1lido."),o())}function A(e,l){if(e&1&&(i(0,"div",7),s(1,k,2,0,"small",8)(2,q,2,0,"small",8),o()),e&2){let n,t,a=c();r(),m("ngIf",(n=a.loginForm.get("email"))==null||n.errors==null?null:n.errors.required),r(),m("ngIf",(t=a.loginForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function G(e,l){e&1&&(i(0,"small"),p(1,"La contrase\xF1a es requerida."),o())}function D(e,l){e&1&&(i(0,"small"),p(1,"La contrase\xF1a es muy corta."),o())}function R(e,l){if(e&1&&(i(0,"div",7),s(1,G,2,0,"small",8)(2,D,2,0,"small",8),o()),e&2){let n,t,a=c();r(),m("ngIf",(n=a.loginForm.get("password"))==null||n.errors==null?null:n.errors.required),r(),m("ngIf",(t=a.loginForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function j(e,l){if(e&1&&(i(0,"p",7),p(1),o()),e&2){let n=c();r(),C(n.errorMessage)}}var N=class e{constructor(l,n,t){this.fb=l;this.api=n;this.router=t;this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}loginForm;isLoading=!1;errorMessage=null;submit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage=null;let l=this.loginForm.value;this.api.login(l).subscribe({next:n=>{this.api.setToken(n.token),this.isLoading=!1,this.router.navigate(["/admin/panel"])},error:n=>{this.isLoading=!1,this.errorMessage="Credenciales inv\xE1lidas. Intenta nuevamente."}})}static \u0275fac=function(n){return new(n||e)(u(w),u(y),u(M))};static \u0275cmp=f({type:e,selectors:[["app-login-form"]],decls:16,vars:6,consts:[[1,"login-panel","container"],[1,"card"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","tu@correo.com"],["class","error",4,"ngIf"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error"],[4,"ngIf"]],template:function(n,t){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),p(3,"Iniciar sesi\xF3n"),o(),i(4,"form",2),v("ngSubmit",function(){return t.submit()}),i(5,"label"),p(6," Email "),_(7,"input",3),o(),s(8,A,3,2,"div",4),i(9,"label"),p(10," Contrase\xF1a "),_(11,"input",5),o(),s(12,R,3,2,"div",4),i(13,"button",6),p(14),o()(),s(15,j,2,1,"p",4),o()()),n&2){let a,g;r(4),m("formGroup",t.loginForm),r(4),m("ngIf",((a=t.loginForm.get("email"))==null?null:a.touched)&&((a=t.loginForm.get("email"))==null?null:a.invalid)),r(4),m("ngIf",((g=t.loginForm.get("password"))==null?null:g.touched)&&((g=t.loginForm.get("password"))==null?null:g.invalid)),r(),m("disabled",t.isLoading),r(),x(" ",t.isLoading?"Entrando...":"Entrar"," "),r(),m("ngIf",t.errorMessage)}},dependencies:[h,F,T,O,L,P,S,E,I,b],styles:[".login-panel[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 12px}.login-panel[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:var(--color-surface);padding:28px;border-radius:12px;box-shadow:0 12px 40px #0206170f;width:100%;max-width:420px}.login-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--color-primary)}.login-panel[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin:12px 0 6px;color:#333}.login-panel[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--color-border)}.login-panel[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#d23}.login-panel[_ngcontent-%COMP%]   .help-links[_ngcontent-%COMP%]{margin-top:12px}.login-panel[_ngcontent-%COMP%]   .help-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.login-panel[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-top:12px}"]})};export{N as LoginFormComponent};
