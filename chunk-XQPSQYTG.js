import{a as A}from"./chunk-ZBPZLCUJ.js";import{a as V}from"./chunk-RQKZCHIK.js";import{d as N,g as z}from"./chunk-M6P4XVJY.js";import"./chunk-GJKZ2IBC.js";import{Eb as o,Fb as u,Gb as f,Ha as O,La as a,Nb as T,Ob as L,Qa as I,Qb as F,Rb as w,Va as S,Z as _,_ as x,_a as d,fb as l,ga as M,ib as P,kc as k,lc as C,mc as h,nb as i,ob as t,pb as p,pc as D,tb as E,tc as b,ub as m,vb as v}from"./chunk-ZNBC4ISR.js";import"./chunk-ODN5LVDJ.js";function H(n,r){if(n&1&&(i(0,"li"),o(1),t()),n&2){let e=r.$implicit;a(),u(e)}}function U(n,r){if(n&1&&(i(0,"div")(1,"strong"),o(2,"Caracter\xEDsticas:"),t(),i(3,"ul"),d(4,H,2,1,"li",11),t()()),n&2){let e=v(2);a(4),l("ngForOf",e.servicio.caracteristicas)}}function q(n,r){if(n&1&&(i(0,"div",9)(1,"h3"),o(2),t(),i(3,"p")(4,"strong"),o(5,"Descripci\xF3n:"),t(),o(6),t(),i(7,"p")(8,"strong"),o(9,"Categor\xEDa:"),t(),o(10),t(),i(11,"p")(12,"strong"),o(13,"Activo:"),t(),o(14),t(),i(15,"p")(16,"strong"),o(17,"Icono:"),t(),p(18,"i"),t(),d(19,U,5,1,"div",10),t()),n&2){let e=v();a(2),u(e.servicio.nombre),a(4),f(" ",e.servicio.descripcion,""),a(4),f(" ",e.servicio.categoria,""),a(4),f(" ",e.servicio.activo?"S\xED":"No",""),a(4),P("fas "+e.servicio.icono),a(),l("ngIf",e.servicio.caracteristicas&&e.servicio.caracteristicas.length>0)}}var y=class n{servicio=null;cerrar=new M;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-detalles-servicio"]],inputs:{servicio:"servicio"},outputs:{cerrar:"cerrar"},decls:11,vars:1,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close",3,"click"],[1,"fas","fa-times"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"modal-body"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,c){e&1&&(i(0,"div",0),m("click",function(){return c.cerrar.emit()}),t(),i(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"Detalles del Servicio"),t(),i(5,"button",4),m("click",function(){return c.cerrar.emit()}),p(6,"i",5),t()(),d(7,q,20,7,"div",6),i(8,"div",7)(9,"button",8),m("click",function(){return c.cerrar.emit()}),o(10,"Cerrar"),t()()()),e&2&&(a(7),l("ngIf",c.servicio))},dependencies:[b,C,h],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1040}.modal-content[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:5px;z-index:1050;width:80%;max-width:600px;box-shadow:0 5px 15px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;padding-bottom:10px;margin-bottom:10px}.modal-title[_ngcontent-%COMP%]{margin:0}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:10px 0}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #eee;padding-top:10px;margin-top:10px;text-align:right}"]})};var G=(n,r)=>({"bg-success":n,"bg-warning":r}),Y=n=>["editar",n];function J(n,r){if(n&1&&(i(0,"option",21),o(1),t()),n&2){let e=r.$implicit;l("value",e),a(),f(" ",e," ")}}function K(n,r){n&1&&(i(0,"div",22),p(1,"span",23),t())}function Q(n,r){if(n&1&&(i(0,"div",24),o(1),t()),n&2){let e=v();a(),f(" ",e.error," ")}}function W(n,r){if(n&1&&(i(0,"div",39),p(1,"img",40),t()),n&2){let e=v().$implicit;a(),l("src",e.imagenUrl,O)("alt",e.nombre)}}function X(n,r){if(n&1){let e=E();i(0,"div",25),d(1,W,2,2,"div",26),i(2,"div",27)(3,"div",28),p(4,"iconify-icon",29),i(5,"h2",30),o(6),t()(),i(7,"p",31),o(8),t(),i(9,"div",32)(10,"span",33),o(11),F(12,"titlecase"),t(),i(13,"div",34)(14,"a",35),o(15,"Editar"),t(),i(16,"button",36),m("click",function(){let s=_(e).$implicit,g=v();return x(g.verDetalles(s))}),o(17,"Detalles"),t(),i(18,"button",37),m("click",function(){let s=_(e).$implicit,g=v();return x(g.eliminarServicio(s.id))}),p(19,"i",38),t()()()()()}if(n&2){let e=r.$implicit;a(),l("ngIf",e.imagenUrl),a(3),l("icon",e.icono||"material-symbols:build"),a(2),u(e.nombre),a(2),u(e.descripcionCorta),a(2),l("ngClass",L(9,G,e.estado==="activo",e.estado==="inactivo")),a(),f(" ",w(12,7,e.estado)," "),a(3),l("routerLink",T(12,Y,e.id))}}function Z(n,r){n&1&&(i(0,"div",41)(1,"p"),o(2,"No se encontraron servicios con los filtros seleccionados."),t()())}function ee(n,r){if(n&1){let e=E();i(0,"app-detalles-servicio",42),m("cerrar",function(){_(e);let s=v();return x(s.cerrarDetalles())}),t()}if(n&2){let e=v();l("servicio",e.selectedServicio)}}var R=class n{constructor(r){this.api=r}servicios=[];filteredServicios=[];categorias=[];isLoading=!1;error=null;selectedServicio=null;searchTerm="";categoryFilter="";statusFilter="";ngOnInit(){this.cargarServicios()}cargarServicios(){this.isLoading=!0,this.error=null,this.api.getServicios().subscribe({next:r=>{this.servicios=r,this.categorias=[...new Set(r.map(e=>e.categoria).filter(Boolean))],this.applyFilters(),this.isLoading=!1},error:()=>{this.error="Error al cargar los servicios",this.isLoading=!1}})}eliminarServicio(r){confirm("\xBFEst\xE1s seguro de que deseas eliminar este servicio?")&&this.api.eliminarServicio(r).subscribe({next:()=>{this.servicios=this.servicios.filter(e=>e.id!==r),this.applyFilters()},error:()=>{alert("Error al eliminar el servicio")}})}verDetalles(r){this.api.getServicio(r.id).subscribe({next:e=>{this.selectedServicio=e},error:e=>{this.error="Error al cargar los detalles del servicio."}})}cerrarDetalles(){this.selectedServicio=null}onSearch(r){this.searchTerm=r.target.value,this.applyFilters()}onCategoryChange(r){this.categoryFilter=r.target.value,this.applyFilters()}onStatusChange(r){this.statusFilter=r.target.value,this.applyFilters()}applyFilters(){this.filteredServicios=this.servicios.filter(r=>{let e=r.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()),c=this.categoryFilter===""||r.categoria===this.categoryFilter,s=this.statusFilter===""||r.estado===this.statusFilter;return e&&c&&s})}static \u0275fac=function(e){return new(e||n)(I(V))};static \u0275cmp=S({type:n,selectors:[["app-listar-servicios"]],decls:32,vars:6,consts:[[1,"container","admin-section"],[1,"section-header"],[1,"muted"],["routerLink","nuevo",1,"btn","btn-primary"],[1,"fas","fa-plus"],[1,"filters-container"],[1,"search-bar"],["type","text","placeholder","Buscar por nombre...",3,"input"],[1,"fas","fa-search"],[1,"filter-controls"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","activo"],["value","inactivo"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"grid-cards"],["class","card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[3,"servicio","cerrar",4,"ngIf"],[3,"value"],[1,"text-center","py-4"],[1,"loading","loading-spinner","loading-lg"],[1,"alert","alert-danger"],[1,"card"],["class","card-image",4,"ngIf"],[1,"card-body"],[1,"card-title-icon"],[1,"icon-xl",3,"icon"],[1,"card-title"],[1,"card-text"],[1,"card-footer"],[1,"badge",3,"ngClass"],[1,"card-actions"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"],[1,"card-image"],[3,"src","alt"],[1,"empty-state"],[3,"cerrar","servicio"]],template:function(e,c){e&1&&(i(0,"div",0),p(1,"app-back-button"),i(2,"header",1)(3,"h1"),o(4,"Gesti\xF3n de Servicios"),t(),i(5,"p",2),o(6," Crea, edita y elimina los servicios de la plataforma. "),t(),i(7,"a",3),p(8,"i",4),o(9," Nuevo Servicio "),t()(),i(10,"div",5)(11,"div",6)(12,"input",7),m("input",function(g){return c.onSearch(g)}),t(),p(13,"i",8),t(),i(14,"div",9)(15,"select",10),m("change",function(g){return c.onCategoryChange(g)}),i(16,"option",11),o(17,"Todas las categor\xEDas"),t(),d(18,J,2,2,"option",12),t(),i(19,"select",10),m("change",function(g){return c.onStatusChange(g)}),i(20,"option",11),o(21,"Todos los estados"),t(),i(22,"option",13),o(23,"Activo"),t(),i(24,"option",14),o(25,"Inactivo"),t()()()(),d(26,K,2,0,"div",15)(27,Q,2,1,"div",16),i(28,"div",17),d(29,X,20,14,"div",18),t(),d(30,Z,3,0,"div",19),t(),d(31,ee,1,1,"app-detalles-servicio",20)),e&2&&(a(18),l("ngForOf",c.categorias),a(8),l("ngIf",c.isLoading),a(),l("ngIf",c.error),a(2),l("ngForOf",c.filteredServicios),a(),l("ngIf",!c.isLoading&&c.filteredServicios.length===0),a(),l("ngIf",c.selectedServicio))},dependencies:[b,k,C,h,D,z,N,A,y],styles:[".admin-section[_ngcontent-%COMP%]{padding:40px 20px}.section-header[_ngcontent-%COMP%]{margin-bottom:40px;display:flex;flex-direction:column;gap:10px}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--color-primary, #0f4c81)}.grid-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px}.card[_ngcontent-%COMP%]{background-color:var(--color-surface, #fff);border-radius:12px;box-shadow:0 8px 16px #0000000d;overflow:hidden;display:flex;flex-direction:column}.card-image[_ngcontent-%COMP%]{height:200px}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-body[_ngcontent-%COMP%]{padding:20px;flex-grow:1;display:flex;flex-direction:column}.card-title-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.card-text[_ngcontent-%COMP%]{color:var(--color-muted, #6b7280);flex-grow:1;margin-bottom:20px}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:var(--color-muted, #6b7280)}",".filters-container[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:30px;align-items:center}.search-bar[_ngcontent-%COMP%]{position:relative;flex-grow:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 20px 12px 40px;border:1px solid var(--color-border, #e6e9ee);border-radius:8px;font-size:1rem}.search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--color-muted, #6b7280)}.filter-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;border:1px solid var(--color-border, #e6e9ee);border-radius:8px;background-color:#fff;font-size:1rem}"]})};export{R as ListarServiciosComponent};
